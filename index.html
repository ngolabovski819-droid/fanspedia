<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Build: 2025-11-16-1315 -->
  <link rel="icon" type="image/svg+xml" sizes="any" href="/favicon.svg">
  <!-- Preconnect to external domains for faster loading -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://images.weserv.nl" crossorigin>
  <link rel="dns-prefetch" href="https://public.onlyfans.com">
  
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YV9QD82K7G"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YV9QD82K7G');
  </script>
  
  <!-- Google Search Console Verification -->
  <!-- <meta name="google-site-verification" content="YOUR_VERIFICATION_CODE_HERE"> -->
  
  <!-- Primary Meta Tags -->
  <title>Best OnlyFans Search Engine - Find OF Creators Fast | FansPedia</title>
  <meta name="title" content="Best OnlyFans Search Engine - Find OF Creators Fast | FansPedia">
  <meta name="description" content="Onlyfans search engine with 10k+ verified TOP models. Search and filter the best girls by category, location, price, and more.">
  <meta name="keywords" content="onlyfans search, onlyfans finder, best onlyfans, onlyfans girls, verified creators, onlyfans models, OF search engine">
  <meta name="author" content="fanspedia.net">
  <link rel="canonical" href="https://fanspedia.net/">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://fanspedia.net/">
  <meta property="og:title" content="Best OnlyFans Search Engine - Find OF Creators Fast">
  <meta property="og:description" content="Onlyfans search engine with 10k+ verified TOP models. Search and filter the best girls by category, location, price, and more.">
  <meta property="og:image" content="https://fanspedia.net/og-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="FansPedia">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://fanspedia.net/">
  <meta name="twitter:title" content="Best OnlyFans Search Engine - Find OF Creators Fast">
  <meta name="twitter:description" content="Onlyfans search engine with 10k+ verified TOP models. Search and filter the best girls by category, location, price, and more.">
  <meta name="twitter:image" content="https://fanspedia.net/og-image.jpg">
  
  <!-- Robots & Indexing -->
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  
  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "WebSite",
        "@id": "https://fanspedia.net/#website",
        "url": "https://fanspedia.net/",
        "name": "FansPedia",
        "description": "OnlyFans search engine with 10k+ verified TOP models",
        "potentialAction": {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://fanspedia.net/?q={search_term_string}"
          },
          "query-input": "required name=search_term_string"
        }
      },
      {
        "@type": "Organization",
        "@id": "https://fanspedia.net/#organization",
        "name": "fanspedia.net",
        "url": "https://fanspedia.net/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://fanspedia.net/og-image.jpg"
        },
        "sameAs": []
      },
      {
        "@type": "WebPage",
        "@id": "https://fanspedia.net/#webpage",
        "url": "https://fanspedia.net/",
        "name": "Best OnlyFans Search Engine - Find OF Creators Fast",
        "isPartOf": {
          "@id": "https://fanspedia.net/#website"
        },
        "about": {
          "@id": "https://fanspedia.net/#organization"
        },
        "description": "Onlyfans search engine with 10k+ verified TOP models. Search and filter the best girls by category, location, price, and more."
      }
    ]
  }
  </script>
  
  <!-- Preload Bootstrap CSS and swap rel on load for faster first paint -->
  <link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"></noscript>
  <!-- Font Awesome for icons - async loaded to prevent render blocking -->
  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
  <style>
    /* ============================================
       DARK MODE CSS VARIABLES
       ============================================ */
    :root {
      --bg-primary: #f5f5f7;
      --bg-secondary: #ffffff;
      --text-primary: #1d1d1f;
      --text-secondary: #666;
      --text-muted: #888;
      --border-color: #e0e0e0;
      --card-shadow: rgba(0, 0, 0, 0.08);
      --card-shadow-hover: rgba(0, 0, 0, 0.12);
      --input-bg: #ffffff;
      --chip-bg: #ffffff;
      --chip-border: #e7eef6;
      --chip-hover-bg: #007aff;
      --chip-hover-text: #ffffff;
      --brand-color: #0099D6;
      --placeholder-color: #999;
      --heading-color: #1d1d1f;
    }

    [data-theme="dark"] {
      --bg-primary: #1a1a1a;
      --bg-secondary: #2a2a2a;
      --text-primary: #e8e8e8;
      --text-secondary: #c8c8c8;
      --text-muted: #888;
      --border-color: #404040;
      --card-shadow: rgba(0, 0, 0, 0.3);
      --card-shadow-hover: rgba(0, 0, 0, 0.5);
      --input-bg: #2a2a2a;
      --chip-bg: #2a2a2a;
      --chip-border: #404040;
      --chip-hover-bg: #0099D6;
      --chip-hover-text: #ffffff;
      --brand-color: #00AFF0;
      --placeholder-color: #999;
      --heading-color: #e8e8e8;
    }

    body {
      background-color: var(--bg-primary);
      color: var(--text-primary);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      padding-top: 68px; /* Space for fixed header - slimmer */
      padding-bottom: 80px; /* Reserve space for sticky bottom nav so footer disclaimer is visible */
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    /* ============================================
       SUPERIOR STICKY HEADER - OnlyFans Theme
       ============================================ */
    .superior-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 9999;
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      box-shadow: 0 4px 24px rgba(0, 175, 240, 0.25);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .superior-header.scrolled {
      box-shadow: 0 8px 32px rgba(0, 175, 240, 0.35);
    }

    /* Main header container */
    .header-main {
      padding: 10px 0;
      backdrop-filter: blur(10px);
    }

    .header-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    /* Logo section */
    .logo-section {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
      text-decoration: none;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: white;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.3s ease;
    }

    .logo-icon:hover {
      transform: scale(1.05) rotate(5deg);
    }

    .logo-icon i {
      color: #00AFF0;
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    .logo-text .brand {
      font-size: 22px;
      font-weight: 900;
      color: white;
      letter-spacing: 0.3px;
      line-height: 1;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
      filter: brightness(1.05);
    }

    .logo-text .tagline {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.95);
      font-weight: 600;
      letter-spacing: 0.8px;
      margin-top: 2px;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }

    /* Header search section */
    .header-search-section {
      flex: 1;
      max-width: 560px;
      position: relative;
    }

    .header-search-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }

    .header-search-input {
      width: 100%;
      padding: 10px 16px 10px 44px; /* no header button, reduce right padding */
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.95);
      font-size: 15px;
      font-weight: 500;
      color: #1d1d1f;
      transition: all 0.3s ease;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
    }

    .header-search-input:focus {
      outline: none;
      border-color: white;
      background: white;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
    }

    .header-search-input::placeholder {
      color: var(--placeholder-color);
    }

    .header-search-icon {
      position: absolute;
      left: 16px;
      color: #00AFF0;
      font-size: 18px;
      pointer-events: none;
    }

    /* header button removed; styles kept here for reference if needed in future */

    /* Quick filters in header */
    .header-quick-filters {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .header-filter-chip {
      padding: 6px 14px;
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 20px;
      color: white;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .header-filter-chip:hover, .header-filter-chip.active {
      background: white;
      color: #00AFF0;
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .header-filter-chip i {
      margin-right: 4px;
      font-size: 11px;
    }

    /* Header actions */
    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-shrink: 0;
    }

    /* Dark mode toggle */
    .theme-toggle {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      width: 44px;
      height: 44px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-1px);
    }

    .theme-toggle:active {
      transform: translateY(0);
    }

    /* Safe Search toggle (matches theme toggle style) */
    .safe-search-toggle {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      width: 44px;
      height: 44px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      position: relative;
    }

    .safe-search-toggle:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-1px);
    }

    .safe-search-toggle:active {
      transform: translateY(0);
    }

    .safe-search-toggle.active {
      background: rgba(52, 199, 89, 0.9);
      border-color: rgba(52, 199, 89, 1);
      box-shadow: 0 0 20px rgba(52, 199, 89, 0.4);
    }

    .safe-search-toggle.active:hover {
      background: rgba(52, 199, 89, 1);
    }

    /* Safe Search status indicator (small badge) */
    .safe-search-toggle.active::after {
      content: '';
      position: absolute;
      top: 2px;
      right: 2px;
      width: 10px;
      height: 10px;
      background: #34c759;
      border: 2px solid white;
      border-radius: 50%;
      box-shadow: 0 2px 8px rgba(52, 199, 89, 0.6);
    }

    /* Database count badge */
    .db-count {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      backdrop-filter: blur(10px);
    }

    .db-count .number {
      font-size: 20px;
      font-weight: 800;
      color: white;
      line-height: 1;
    }

    .db-count .label {
      font-size: 11px;
      color: rgba(255, 255, 255, 0.95);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 3px;
    }

    /* Header CTA Button */
    .header-cta-btn {
      padding: 14px 32px;
      background: white;
      color: #00AFF0;
      border: none;
      border-radius: 50px;
      font-weight: 800;
      font-size: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 16px rgba(255, 255, 255, 0.3);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      white-space: nowrap;
    }

    .header-cta-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(255, 255, 255, 0.4);
      background: rgba(255, 255, 255, 0.95);
    }

    .header-cta-btn:active {
      transform: translateY(0);
    }

    .header-cta-btn i {
      margin-left: 6px;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* Mobile menu toggle */
    .mobile-menu-toggle {
      display: none;
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      width: 44px;
      height: 44px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      justify-content: center;
      align-items: center;
      font-size: 18px;
    }

    .mobile-menu-toggle:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-1px);
    }

  /* Desktop header nav (Categories dropdown) */
  .desktop-nav { position: relative; flex-shrink: 0; }
    .desktop-nav .nav-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.2);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.35);
      border-radius: 9999px;
      padding: 10px 14px;
      font-weight: 800;
      font-size: 14px;
      cursor: pointer;
      transition: all .2s ease;
      text-decoration: none;
    }
    .desktop-nav .nav-btn:hover { background: rgba(255,255,255,0.3); }
    .desktop-nav .nav-btn i { font-size: 12px; opacity: 0.9; }
    .desktop-nav .dropdown-menu {
      position: absolute;
      right: 0;
      top: calc(100% + 8px);
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 12px 32px rgba(0,0,0,0.15);
      padding: 8px;
      min-width: 240px;
      display: none;
      z-index: 10000;
    }
    .desktop-nav .dropdown-menu.open { display: block; }
    .desktop-nav .dropdown-menu a {
      display: block;
      padding: 10px 12px;
      color: #1d1d1f;
      font-weight: 700;
      border-radius: 8px;
      text-decoration: none;
      transition: background .15s ease, color .15s ease;
    }
    .desktop-nav .dropdown-menu a:hover { background: #f5f5f7; color: #00AFF0; }
    .desktop-nav .dropdown-menu .divider { height: 1px; background: #eee; margin: 6px 6px; }
    .desktop-nav .dropdown-menu a.view-all { color: #00AFF0; }

    /* Mobile drawer */
    .drawer-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 10000; opacity: 0; pointer-events: none; transition: opacity .3s ease; }
    .drawer-overlay.open { opacity: 1; pointer-events: auto; }
    .mobile-drawer { position: fixed; top: 0; right: -100%; width: 82%; max-width: 340px; height: 100%; background: #fff; box-shadow: -8px 0 24px rgba(0,0,0,0.2); z-index: 10001; padding: 16px; display: flex; flex-direction: column; gap: 6px; transition: right .3s ease; }
    .mobile-drawer.open { right: 0; }
    .mobile-drawer .drawer-close { align-self: flex-end; background: none; border: none; font-size: 28px; line-height: 1; color: #1d1d1f; margin-bottom: 4px; cursor: pointer; }
    /* Base drawer links (Home) */
    .mobile-drawer > a { display:block; padding: 14px 12px; border-radius: 8px; color: #1d1d1f; font-weight: 700; text-decoration: none; margin: 2px 0; font-size: 16px; }
    .mobile-drawer > a:hover { background: #f5f5f7; color: #00AFF0; }
    
    /* Categories collapsible section */
    .drawer-categories-toggle {
      display: flex; align-items: center; justify-content: space-between; padding: 14px 12px; cursor: pointer;
      border-radius: 8px; margin: 2px 0; transition: background 0.2s ease; font-size: 16px; font-weight: 700; color: #1d1d1f;
    }
    .drawer-categories-toggle:hover { background: #f5f5f7; }
    .drawer-categories-toggle .icon-text { display: flex; align-items: center; gap: 10px; }
    .drawer-categories-toggle .icon-text i { font-size: 18px; color: #1d1d1f; }
    .drawer-categories-toggle .chevron { font-size: 14px; transition: transform 0.3s ease; color: #666; }
    .drawer-categories-toggle.open .chevron { transform: rotate(180deg); }
    
    /* Categories list container */
    #drawerCategoriesSection {
      max-height: 0; overflow: hidden; transition: max-height 0.3s ease, opacity 0.3s ease; opacity: 0;
    }
    #drawerCategoriesSection.open { max-height: 800px; opacity: 1; overflow-y: auto; }
    
    /* Most Popular label */
    .drawer-categories-label {
      color: #999; font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px;
      padding: 12px 16px 8px; margin: 0;
    }
    
    /* Category list */
    #drawerCategories { display: flex; flex-direction: column; gap: 0; padding: 0 4px; max-height: 400px; overflow-y: auto; }
    #drawerCategories::-webkit-scrollbar { width: 4px; }
    #drawerCategories::-webkit-scrollbar-thumb { background: #ddd; border-radius: 4px; }
    #drawerCategories a {
      display: block; padding: 12px 12px; color: #555; font-weight: 600; text-decoration: none;
      border-radius: 6px; margin: 1px 0; font-size: 15px; transition: background 0.15s ease, color 0.15s ease;
    }
    #drawerCategories a:hover { background: #f5f5f7; color: #00AFF0; }
    
    /* View All button */
    .drawer-view-all-btn {
      display: block; margin: 12px 8px 8px; padding: 14px 20px; background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      color: white; text-align: center; border-radius: 12px; font-weight: 800; text-decoration: none; font-size: 15px;
      box-shadow: 0 4px 12px rgba(0,175,240,0.3); transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .drawer-view-all-btn:hover { transform: translateY(-1px); box-shadow: 0 6px 16px rgba(0,175,240,0.4); color: white; }

    /* Header responsive breakpoints */
    @media (max-width: 1200px) {
      .db-count .number { font-size: 16px; }
      .db-count .label { font-size: 9px; }
    }

    @media (max-width: 992px) {
      .header-quick-filters { display: none; }
      .header-cta-btn { padding: 10px 20px; font-size: 13px; }
    }

    /* Themed Mobile Search Modal (dark/light aware) */
    .mobile-search-modal { position:fixed; inset:0; background:var(--bg-secondary); z-index:10003; display:none; flex-direction:column; color:var(--text-primary); }
    .mobile-search-modal.active { display:flex; }
    .mobile-search-header { display:flex; align-items:center; gap:12px; padding:16px; background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%); box-shadow:0 4px 12px rgba(0,175,240,0.3); }
    .mobile-search-back { background:none; border:none; color:#fff; font-size:24px; cursor:pointer; padding:8px; display:flex; align-items:center; justify-content:center; }
    .mobile-search-input-wrapper { flex:1; position:relative; }
    .mobile-search-input { width:100%; padding:12px 16px 12px 44px; border:2px solid var(--border-color); border-radius:50px; background:var(--input-bg); font-size:16px; font-weight:500; color:var(--text-primary); transition:background .25s ease,border-color .25s ease, box-shadow .25s ease; }
    .mobile-search-input:focus { outline:none; border-color:var(--brand-color); background:var(--bg-secondary); box-shadow:0 0 0 3px rgba(0,175,240,0.25); }
    .mobile-search-icon { position:absolute; left:16px; top:50%; transform:translateY(-50%); color:#00AFF0; font-size:18px; pointer-events:none; }
    .mobile-search-content { flex:1; overflow-y:auto; padding:20px 16px; }
    .mobile-search-label { color:var(--text-secondary); font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; margin-bottom:12px; }
    .mobile-search-suggestions { display:flex; flex-direction:column; gap:4px; }
    .mobile-search-suggestion { display:flex; align-items:center; gap:12px; padding:14px 16px; background:var(--bg-primary); border-radius:12px; text-decoration:none; color:var(--text-primary); font-weight:600; font-size:15px; transition:all .2s ease; }
    .mobile-search-suggestion:hover, .mobile-search-suggestion:active { background:var(--bg-secondary); transform:translateX(4px); }
    .mobile-search-suggestion i { color:#00AFF0; font-size:16px; }
    .mobile-search-trigger { display:none; background:rgba(255,255,255,0.2); border:1px solid rgba(255,255,255,0.3); color:#fff; width:44px; height:44px; border-radius:12px; cursor:pointer; justify-content:center; align-items:center; font-size:20px; transition:all .3s ease; }
    .mobile-search-trigger:hover { background:rgba(255,255,255,0.3); transform:translateY(-1px); }
    [data-theme="dark"] .mobile-search-modal { box-shadow:0 0 0 1px rgba(255,255,255,0.06); }
    [data-theme="dark"] .mobile-search-suggestion { background:var(--bg-secondary); }
    [data-theme="dark"] .mobile-search-suggestion:hover { background:#333; }

    @media (max-width: 768px) {
      body { padding-top: 66px; }
      .header-container { flex-wrap: nowrap; gap: 12px; }
      .logo-text .tagline { display: none; }
      .header-search-section { display: none !important; } /* Hide desktop search on mobile */
      .mobile-search-trigger { display: inline-flex; } /* Show mobile search icon */
      /* Show burger on mobile; hide desktop nav */
      .desktop-nav { display: none; }
      .mobile-menu-toggle { display: inline-flex; }
      .header-actions { display: flex; }
      .header-main { padding: 8px 0; }
    }

    @media (max-width: 480px) {
      body { padding-top: 62px; }
      .logo-icon { width: 40px; height: 40px; font-size: 20px; }
      .logo-text .brand { font-size: 16px; }
      .header-search-input { padding: 10px 16px 10px 40px; font-size: 14px; }
      .header-search-btn { padding: 8px 16px; font-size: 13px; }
      .header-cta-btn span { display: none; }
      .header-cta-btn { padding: 10px 14px; }
      .header-main { padding: 6px 0; }
    }
    .container {
      max-width: 1400px;
      margin-top: 40px;
      padding-bottom: 60px;
    }
    .card {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: none;
      border-radius: 20px;
      transition: all 0.3s ease;
      overflow: hidden;
      box-shadow: 0 2px 8px var(--card-shadow);
      position: relative;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px var(--card-shadow-hover);
    }
    .card img {
      border-radius: 20px 20px 0 0;
      height: 360px;
      object-fit: cover;
      width: 100%;
      min-height: 360px;
      background: linear-gradient(90deg, #e8e8e8 25%, #f0f0f0 50%, #e8e8e8 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      transition: filter 0.3s ease, opacity 0.3s ease;
    }
    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    /* Safe Search blur effect */
    body.safe-search-active .card img {
      filter: blur(20px) saturate(0.7);
      opacity: 0.85;
    }
    
    body.safe-search-active .card:hover img {
      filter: blur(8px) saturate(0.85);
      opacity: 0.95;
    }
    
    /* Optional 18+ badge overlay when blurred */
    body.safe-search-active .card::before {
      content: '18+';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.75);
      color: white;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 800;
      font-size: 24px;
      letter-spacing: 2px;
      pointer-events: none;
      z-index: 5;
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    .favorite-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: all 0.2s ease;
      z-index: 10;
      font-size: 20px;
    }
    .favorite-btn span { color: #ccc; }
    .favorite-btn:hover {
      transform: scale(1.1);
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      box-shadow: 0 6px 16px rgba(0,175,240,0.35);
    }
    .favorite-btn:hover span { color: #fff !important; }
    .favorite-btn.active {
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      box-shadow: 0 6px 16px rgba(0,175,240,0.35);
      transform: none;
    }
    .favorite-btn.active span { color: #fff !important; }
    .view-profile-btn {
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      color: white;
      border: none;
      padding: 14px 28px;
      border-radius: 12px;
      font-weight: 800;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.25s ease;
      text-decoration: none;
      display: block;
      width: 100%;
      text-align: center;
      margin-top: 16px;
      box-shadow: 0 6px 18px rgba(0,175,240,0.35);
    }
    .view-profile-btn:hover {
      background: linear-gradient(135deg, #0099D6 0%, #0088C0 100%);
      transform: translateY(-1px);
      box-shadow: 0 8px 22px rgba(0,175,240,0.45);
      color: white;
    }
    .card-body {
      padding: 20px;
    }
    .card h5 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 4px;
      color: var(--text-primary);
    }
    .username {
      color: var(--text-secondary);
      font-size: 14px;
      margin-bottom: 8px;
    }
    .price-tag {
      color: #34c759;
      font-weight: 700;
      font-size: 18px;
    }
    .price-free {
      color: #34c759;
      font-weight: 700;
      font-size: 16px;
      text-transform: uppercase;
    }
    .bio-snippet {
      color: var(--text-secondary);
      font-size: 13px;
      line-height: 1.4;
      margin-top: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    h1 {
      color: #1d1d1f;
      font-weight: 800;
      margin-bottom: 8px;
    }
    .subtitle {
      color: var(--text-secondary);
      font-size: 18px;
      margin-bottom: 30px;
    }
    .form-control, .form-range {
      border-radius: 12px;
      border: 1px solid var(--border-color);
      background: var(--input-bg);
      color: var(--text-primary);
    }
    .form-control::placeholder {
      color: var(--placeholder-color);
      opacity: 1;
    }
    .form-control:focus {
      border-color: #00bcd4;
      box-shadow: 0 0 0 3px rgba(0,188,212,0.1);
    }
    /* Reserve space on initial load to prevent CLS when cards render */
    #results {
      min-height: 1600px;
    }
    #results.loaded {
      min-height: 0;
    }
    .error {
      color: #ff3b30;
      margin-top: 20px;
    }
    #status {
      color: #666;
      margin-top: 20px;
      font-size: 14px;
    }
    /* Search bar tweaks */
    .search-group { max-width: 860px; margin: 0 auto; }
    @media (min-width: 1200px) { .search-group { max-width: 780px; } }
    .search-group { position: relative; }
    .search-group .form-control { border-radius: 9999px 0 0 9999px; padding-right: 45px; }
    .clear-search {
      position: absolute;
      right: 140px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #999;
      font-size: 20px;
      cursor: pointer;
      padding: 8px 12px;
      display: none;
      z-index: 10;
      line-height: 1;
      transition: color 0.2s, background 0.2s, box-shadow 0.2s;
      border-radius: 9999px;
    }
    .clear-search:hover { color: #fff; background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%); box-shadow: 0 6px 16px rgba(0,175,240,0.35); }
    .clear-search.visible { display: block; }
    .search-group .btn-search { border-radius: 0 9999px 9999px 0; }
    .btn-search {
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      border: none;
      color: #fff;
      font-weight: 800;
      box-shadow: 0 4px 12px rgba(0,175,240,0.4);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    }
    .btn-search:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0,175,240,0.5);
      background: linear-gradient(135deg, #0099D6 0%, #0088C0 100%);
    }
    .btn-search:active { transform: translateY(0); }
    .btn-search:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      box-shadow: 0 2px 8px rgba(0,175,240,0.25);
    }
    /* Search button spinner */
    #searchBtn { position: relative; display: inline-flex; align-items: center; gap: 10px; }
    #searchBtn .spinner {
      width: 16px; height: 16px; border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.5);
      border-top-color: #fff;
      animation: spin 0.8s linear infinite;
      display: none;
    }
    #searchBtn.loading .spinner { display: inline-block; }
    @keyframes spin { to { transform: rotate(360deg); } }
    
    /* Reset filters button */
    .btn-reset {
      border-radius: 9999px;
      border: none;
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      color: #fff;
      padding: 10px 16px;
      font-weight: 800;
      box-shadow: 0 4px 12px rgba(0,175,240,0.3);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    }
    .btn-reset:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0,175,240,0.4);
      background: linear-gradient(135deg, #0099D6 0%, #0088C0 100%);
    }
    /* Back to top button */
    #backToTop {
      position: fixed;
      right: 16px;
      bottom: 80px;
      width: 48px;
      height: 48px;
      border-radius: 9999px;
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      color: #fff;
      border: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 18px rgba(0,175,240,0.35);
      cursor: pointer;
      opacity: 0;
      pointer-events: none;
      transform: translateY(6px);
      transition: opacity .25s ease, transform .25s ease, background-color .2s ease;
      z-index: 1000;
    }
    #backToTop.visible { opacity: 1; pointer-events: auto; transform: translateY(0); }
    #backToTop:hover { background: linear-gradient(135deg, #0099D6 0%, #0088C0 100%); box-shadow: 0 10px 26px rgba(0,175,240,0.5); }
    /* Filters layout */
    .filters { gap: 12px; }
    /* Prevent focus scroll on filter controls */
    .form-check-input, .form-range {
      scroll-margin: 0;
    }
    /* Filters bar */
    .filters-container {
      background: var(--bg-primary);
      padding: 16px 0;
      margin-bottom: 20px;
    }
    /* Switches: match button gradient on the knob */
    .form-switch .form-check-input {
      width: 44px;
      height: 24px;
      background: #eef7ff;
      border: 2px solid #d6ecfa;
      border-radius: 9999px;
      position: relative;
      cursor: pointer;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      transition: background-color .2s ease, border-color .2s ease, box-shadow .2s ease;
    }
    
    /* Dark mode toggle visibility */
    [data-theme="dark"] .form-switch .form-check-input {
      background: #2a2a2a;
      border: 2px solid #606060;
    }
    
    [data-theme="dark"] .form-switch .form-check-input:checked {
      background: rgba(0,175,240,0.20);
      border: 2px solid #00AFF0;
    }
    
    .form-switch .form-check-input::before {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #ffffff;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      transition: transform .2s ease, background .2s ease;
    }
    .form-switch .form-check-input:checked {
      background: rgba(0,175,240,0.20);
      border-color: #00AFF0;
    }
    .form-switch .form-check-input:checked::before {
      transform: translateX(20px);
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      box-shadow: 0 4px 10px rgba(0,175,240,0.35);
    }
    .form-switch .form-check-input:focus {
      box-shadow: 0 0 0 0.2rem rgba(0,175,240,0.25);
    }

    /* Recent searches chips */
    .recent-searches {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
      margin-top: 12px;
      margin-bottom: 8px;
    }
    .search-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      background: white;
      border: 1px solid #ddd;
      border-radius: 9999px;
      font-size: 13px;
      color: #555;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .search-chip:hover {
      background: var(--chip-hover-bg);
      color: var(--chip-hover-text);
      border-color: var(--chip-hover-bg);
    }
    .search-chip .remove {
      font-size: 16px;
      opacity: 0.6;
      margin-left: 2px;
    }
    .search-chip:hover .remove { opacity: 1; }
    /* Active filter chips: use brand gradient */
    #activeFilters .search-chip {
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      color: #ffffff;
      border-color: transparent;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(0,175,240,0.35);
    }
    #activeFilters .search-chip:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0,175,240,0.45);
    }
    #activeFilters .search-chip .remove { color: #ffffff; opacity: 0.85; }
    #activeFilters .search-chip .remove:hover { opacity: 1; }
    /* Favorites bar */
    .favorites-bar {
      display: none !important;
      gap: 8px;
      align-items: center;
      overflow-x: auto;
      white-space: nowrap;
      padding: 8px 0;
      margin-top: 6px;
      scroll-snap-type: x proximity;
      overscroll-behavior-x: contain;
      -webkit-overflow-scrolling: touch;
    }
    .favorite-chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 9999px;
      color: var(--brand-color);
      font-weight: 700;
      box-shadow: 0 2px 6px rgba(0,175,240,0.12);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      scroll-snap-align: start;
    }
    .favorite-chip:hover { transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,175,240,0.2); }
    .favorite-chip .heart { color: var(--brand-color); font-size: 14px; }
    .favorite-chip .open { color: inherit; text-decoration: none; }
    .favorite-chip .remove {
      background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 16px; line-height: 1; padding: 0 2px; margin-left: 4px; border-radius: 6px;
      transition: color 0.2s, background 0.2s;
    }
    /* Hide scrollbars for horizontal chip scrollers */
    .favorites-bar::-webkit-scrollbar { display: none; }
    .favorites-bar { scrollbar-width: none; }
    .favorite-chip .remove:hover { color: #fff; background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%); }
    .price-group { display: flex; align-items: center; flex-wrap: nowrap; }
    .price-group .form-label { margin-bottom: 0; }
  .price-range { width: 180px; touch-action: pan-x; -ms-touch-action: pan-x; -webkit-user-select: none; user-select: none; }
    /* Custom range slider styling to match button gradient */
    .price-range::-webkit-slider-runnable-track {
      height: 6px;
      border-radius: 9999px;
      background: #eaf7ff;
    }
    .price-range::-moz-range-track {
      height: 6px;
      border-radius: 9999px;
      background: #eaf7ff;
    }
    .price-range::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px; height: 20px; border-radius: 50%;
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      border: 2px solid #fff;
      box-shadow: 0 4px 10px rgba(0,175,240,0.35);
      margin-top: -7px; /* center on track */
      cursor: pointer;
    }
    .price-range::-moz-range-thumb {
      width: 20px; height: 20px; border-radius: 50%;
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      border: 2px solid #fff;
      box-shadow: 0 4px 10px rgba(0,175,240,0.35);
      cursor: pointer;
    }
    .price-range:focus { outline: none; }
    .price-range:focus-visible { outline: 2px solid #00AFF0; outline-offset: 2px; }
    .price-value { display: inline-block; min-width: 44px; text-align: center; padding: 4px 10px; border-radius: 9999px; background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%); color: #ffffff; font-weight: 800; box-shadow: 0 4px 12px rgba(0,175,240,0.25); }

    /* Mobile tuning: make chips compact and horizontally scrollable */
    @media (max-width: 576px) {
      /* Recent + Active chips containers */
      .recent-searches {
        flex-wrap: nowrap;
        overflow-x: auto;
        white-space: nowrap;
        justify-content: flex-start;
        gap: 6px;
        padding-bottom: 2px;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-x: contain;
        scroll-snap-type: x proximity;
      }
      .recent-searches::-webkit-scrollbar { display: none; }
      .recent-searches { scrollbar-width: none; }
      .search-chip { padding: 6px 12px; font-size: 12.5px; scroll-snap-align: start; }

      /* Favorites bar */
      .favorites-bar { gap: 6px; padding: 6px 0; margin-top: 4px; }
      .favorite-chip { padding: 6px 10px; font-size: 12.5px; min-height: 32px; }
      .favorite-chip .remove { padding: 2px 6px; margin-left: 2px; }
    }
    @media (min-width: 576px) { .price-range { width: 240px; } }
    @media (min-width: 992px) { .price-range { width: 300px; } }
    @media (max-width: 576px) {
      h1 { font-size: 28px; line-height: 1.15; }
      /* Stack label above slider on small screens */
      .price-group { flex-direction: column; align-items: stretch; }
      .price-group .form-label { margin-bottom: 6px; }
      .price-range { width: 100%; }
      .price-value { align-self: flex-end; margin-top: 6px; }
    }
    /* Very small screens: make Search button full width */
    @media (max-width: 400px) {
  .search-group .input-group { flex-wrap: wrap; }
  .search-group .form-control { border-radius: 9999px; padding-right: 45px; }
  .search-group .btn-search { width: 100%; margin-top: 8px; border-radius: 9999px; }
  .clear-search { right: 15px; top: 14px; transform: none; }
    }
    /* Smaller card image on tiny devices */
    @media (max-width: 400px) {
      .card img { height: 320px; min-height: 320px; }
    }
    
    /* ============================================
       TRENDING REELS SECTION
       ============================================ */
    .trending-reels-section {
      margin: 40px auto 60px;
      max-width: 1400px;
      padding: 0 16px;
    }
    
    .trending-title {
      font-size: 32px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 24px;
      text-align: left;
    }
    
    .reels-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }
    
    .reel-card {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      cursor: pointer;
      aspect-ratio: 9/16;
      background: #000;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .reel-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0, 175, 240, 0.3);
    }
    
    .reel-card video,
    .reel-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .reel-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 20px;
      background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.8) 100%);
      color: white;
    }
    
    .reel-play-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #000;
      pointer-events: none;
      transition: all 0.3s ease;
    }
    
    .reel-card:hover .reel-play-icon {
      transform: translate(-50%, -50%) scale(1.1);
      background: rgba(0, 175, 240, 1);
      color: white;
    }
    
    .reel-stats {
      display: flex;
      gap: 16px;
      align-items: center;
      font-size: 14px;
      margin-top: 8px;
    }
    
    .reel-stat {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .reel-username {
      font-weight: 600;
      font-size: 15px;
      margin-bottom: 4px;
    }
    
    .reel-caption {
      font-size: 13px;
      opacity: 0.9;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .reel-onlyfans-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(0, 175, 240, 0.95);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
      backdrop-filter: blur(10px);
    }
    
    /* Reel Modal (TikTok-style) */
    .reel-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(10px);
    }
    
    .reel-modal.active {
      display: flex;
    }
    
    .reel-modal-content {
      position: relative;
      max-width: 420px;
      width: 90%;
      max-height: 85vh;
      background: #000;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0, 175, 240, 0.5);
    }
    
    .reel-modal-video {
      width: 100%;
      height: 85vh;
      max-height: 85vh;
      display: block;
      background: #000;
      object-fit: cover;
    }
    
    .reel-modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 44px;
      height: 44px;
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10001;
      transition: all 0.3s ease;
    }
    
    .reel-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }
    
    .reel-nav-btn {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 44px;
      height: 44px;
      background: rgba(0, 0, 0, 0.6);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      color: white;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10001;
      transition: all 0.3s ease;
      opacity: 0.7;
    }
    
    .reel-nav-btn:hover {
      background: rgba(0, 175, 240, 0.9);
      opacity: 1;
      transform: translateX(-50%) scale(1.1);
    }
    
    .reel-nav-up {
      top: 80px;
    }
    
    .reel-nav-down {
      bottom: 20px;
    }

    /* New arrow navigation positioned on the right side */
    .reel-nav-arrows {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 20px;
      z-index: 10002;
    }

    .reel-nav-arrow-btn {
      width: 50px;
      height: 50px;
      background: rgba(0, 0, 0, 0.7);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      opacity: 0.8;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    }

    .reel-nav-arrow-btn:hover {
      background: rgba(0, 175, 240, 0.9);
      opacity: 1;
      transform: scale(1.1);
      box-shadow: 0 4px 12px rgba(0, 175, 240, 0.5);
    }

    .reel-nav-arrow-btn i {
      pointer-events: none;
    }

    /* Video controls bar */
    .reel-media-wrapper {
      position: relative;
      width: 100%;
      height: 85vh;
    }

    .reel-controls-bar {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0));
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 1000;
    }

    .reel-media-wrapper:hover .reel-controls-bar {
      opacity: 1;
    }

    .reel-control-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 6px;
      color: white;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    .reel-control-btn:hover {
      background: rgba(0, 175, 240, 0.9);
      transform: scale(1.1);
    }

    .reel-volume-control {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .reel-volume-slider {
      width: 100px;
      height: 4px;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .reel-volume-control:hover .reel-volume-slider {
      opacity: 1;
    }

    .reel-volume-slider::-webkit-slider-thumb {
      appearance: none;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #00AFF0;
      cursor: pointer;
    }

    .reel-volume-slider::-moz-range-thumb {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #00AFF0;
      cursor: pointer;
      border: none;
    }

    .reel-menu-btn {
      margin-left: auto;
    }
    
    .reel-modal-sidebar {
      position: fixed;
      right: auto;
      left: 50%;
      margin-left: 235px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 20px;
      z-index: 10002;
      pointer-events: auto;
    }
    
    .reel-sidebar-close {
      width: 56px;
      height: 56px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .reel-sidebar-close:hover {
      background: rgba(255, 0, 0, 0.8);
      transform: scale(1.15);
      box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
    }
    
    .reel-modal-btn {
      width: 56px;
      height: 56px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .reel-modal-btn:nth-child(2) {
      /* Like button - visible */
    }
    
    .reel-modal-btn:nth-child(3) {
      /* OnlyFans button - hide */
      display: none;
    }
    
    .reel-modal-btn:nth-child(4) {
      /* Share button - visible */
    }
    
    .reel-modal-btn:hover {
      background: rgba(0, 175, 240, 0.9);
      transform: scale(1.15);
      box-shadow: 0 6px 20px rgba(0, 175, 240, 0.4);
    }
    
    .reel-modal-btn-label {
      font-size: 11px;
      margin-top: 4px;
      font-weight: 700;
      text-align: center;
    }
    
    .reel-modal-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 70px;
      padding: 24px 20px;
      background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.85) 40%, rgba(0, 0, 0, 0.95) 100%);
      color: white;
      z-index: 9999;
    }
    
    .reel-modal-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .reel-modal-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid white;
      object-fit: cover;
    }
    
    .reel-modal-username {
      font-weight: 700;
      font-size: 16px;
      color: white;
    }
    
    .reel-modal-caption {
      font-size: 14px;
      line-height: 1.5;
      margin-top: 8px;
      color: rgba(255, 255, 255, 0.95);
    }
    
    @media (max-width: 768px) {
      .reels-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 12px;
      }
      
      .trending-title {
        font-size: 26px;
        text-align: center;
      }
      
      .reel-modal-content {
        width: 100%;
        max-width: 100%;
        height: 100%;
        max-height: 100vh;
        border-radius: 0;
      }
      
      .reel-modal-video {
        max-height: 100vh;
      }
    }
    
    @media (max-width: 576px) {
      .reels-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
      }
    }
    
    /* ============================================
       SAFE SEARCH MODAL (First-Time Consent)
       ============================================ */
    .safe-search-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.75);
      backdrop-filter: blur(10px);
      z-index: 10002;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: fadeIn 0.3s ease;
    }
    
    .safe-search-modal.show {
      display: flex;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .safe-search-modal-content {
      background: var(--bg-secondary);
      border-radius: 24px;
      padding: 40px;
      max-width: 520px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    
    @keyframes slideUp {
      from { transform: translateY(40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .safe-search-modal-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 24px;
      font-size: 36px;
      color: white;
      box-shadow: 0 8px 24px rgba(0, 175, 240, 0.4);
    }
    
    .safe-search-modal h2 {
      font-size: 28px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 12px;
      text-align: center;
    }
    
    .safe-search-modal p {
      color: var(--text-secondary);
      font-size: 16px;
      line-height: 1.6;
      text-align: center;
      margin-bottom: 32px;
    }
    
    .safe-search-modal-actions {
      display: flex;
      gap: 12px;
      flex-direction: column;
    }
    
    .safe-search-modal-btn {
      padding: 16px 32px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      text-align: center;
    }
    
    .safe-search-modal-btn-primary {
      background: linear-gradient(135deg, #34c759 0%, #30b350 100%);
      color: white;
      box-shadow: 0 6px 18px rgba(52, 199, 89, 0.4);
    }
    
    .safe-search-modal-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(52, 199, 89, 0.5);
    }
    
    .safe-search-modal-btn-secondary {
      background: var(--bg-primary);
      color: var(--text-primary);
      border: 2px solid var(--border-color);
    }
    
    .safe-search-modal-btn-secondary:hover {
      background: var(--bg-secondary);
      border-color: var(--text-secondary);
    }
    
    .safe-search-modal-footer {
      margin-top: 24px;
      text-align: center;
      font-size: 13px;
      color: var(--text-muted);
    }
    
    @media (max-width: 576px) {
      .safe-search-modal-content {
        padding: 32px 24px;
      }
      
      .safe-search-modal h2 {
        font-size: 24px;
      }
      
      .safe-search-modal p {
        font-size: 15px;
      }
    }
    /* Load More Button */
    .load-more-btn {
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      color: white;
      border: none;
      padding: 18px 48px;
      font-size: 18px;
      font-weight: 800;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 24px rgba(0,175,240,0.35);
      display: inline-flex;
      align-items: center;
      gap: 12px;
      position: relative;
      overflow: hidden;
    }
    .load-more-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s ease;
    }
    .load-more-btn:hover::before {
      left: 100%;
    }
    .load-more-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(0,175,240,0.45);
      background: linear-gradient(135deg, #0099D6 0%, #0088C0 100%);
    }
    .load-more-btn:active {
      transform: translateY(0);
      box-shadow: 0 6px 20px rgba(0, 122, 255, 0.3);
    }
    .load-more-btn .btn-icon {
      font-size: 24px;
      transition: transform 0.3s ease;
    }
    .load-more-btn:hover .btn-icon {
      transform: translateY(3px);
    }
    .load-more-btn:disabled {
      background: linear-gradient(135deg, #ccc 0%, #999 100%);
      cursor: not-allowed;
      box-shadow: none;
    }
    .load-more-btn:disabled:hover {
      transform: none;
    }
    @media (max-width: 576px) {
      .load-more-btn {
        padding: 16px 40px;
        font-size: 16px;
      }
    }

    /* ============================================
       BREADCRUMBS - SEO Optimized
       ============================================ */
    .breadcrumbs-wrapper { background: var(--bg-secondary); border-bottom: 1px solid var(--border-color); padding: 0; position: relative; z-index: 100; }
    .breadcrumbs { max-width: 1400px; margin: 0 auto; padding: 12px 16px; display: flex; align-items: center; flex-wrap: wrap; gap: 6px; font-size: 13px; list-style: none; }
    .breadcrumb-item { display: inline-flex; align-items: center; color: var(--text-secondary); font-weight: 500; }
    .breadcrumb-item a { color: var(--text-secondary); text-decoration: none; transition: color .2s ease; padding: 4px 6px; border-radius: 6px; }
    .breadcrumb-item a:hover { color: var(--brand-color); background: rgba(0, 175, 240, 0.08); }
    .breadcrumb-item.active { color: var(--text-primary); font-weight: 600; }
    .breadcrumb-separator { color: var(--text-muted); margin: 0 2px; font-size: 11px; user-select: none; }
    .breadcrumb-home { display: inline-flex; align-items: center; gap: 4px; }
    .breadcrumb-home i { font-size: 13px; }
    @media (max-width: 480px) { .breadcrumbs { font-size: 12px; padding: 10px 16px; gap: 4px; } .breadcrumb-separator { margin: 0 1px; } }
  </style>
</head>
<body>
  <!-- SUPERIOR STICKY HEADER -->
  <header class="superior-header" id="mainHeader">
    <!-- Main header -->
    <div class="header-main">
      <div class="header-container">
        <!-- Logo -->
        <a href="/" class="logo-section">
          <svg width="140" height="42" viewBox="0 0 400 120" xmlns="http://www.w3.org/2000/svg">
            <!-- Pin + F -->
            <g transform="translate(10,8)">
              <!-- Map pin -->
              <path
                d="M48 4
                   C31 4 18 17.5 18 34.5
                   C18 48.5 30.1 62.9 42.4 79.1
                   C45.0 82.7 51.0 82.7 53.6 79.1
                   C65.9 62.9 78 48.5 78 34.5
                   C78 17.5 65 4 48 4
                   Z"
                fill="#FFFFFF"
              />
              <!-- Centered large F -->
              <text
                x="48"
                y="40"
                text-anchor="middle"
                dominant-baseline="middle"
                font-family="Poppins, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"
                font-size="34"
                font-weight="700"
                fill="#000000">
                F
              </text>
            </g>

            <!-- Wordmark -->
            <text
              x="115"
              y="64"
              font-family="Poppins, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif"
              font-size="40"
              font-weight="500"
              fill="#FFFFFF">
              FansPedia
            </text>
          </svg>
        </a>

        <!-- Desktop navigation (moved next to logo) -->
        <div class="desktop-nav">
          <button id="categoriesToggle" class="nav-btn" aria-haspopup="true" aria-expanded="false">
            Categories <i class="fas fa-chevron-down" aria-hidden="true"></i>
          </button>
          <div id="categoriesMenu" class="dropdown-menu" role="menu" aria-hidden="true">
            <!-- Populated dynamically from config/categories.js -->
          </div>
        </div>

        <div class="desktop-nav">
          <a href="/locations/" class="nav-btn">
            Locations <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
          </a>
        </div>

        <!-- Search - THE CENTERPIECE -->
        <div class="header-search-section">
          <div class="header-search-wrapper">
            <i class="fas fa-search header-search-icon"></i>
            <input 
              type="text" 
              class="header-search-input" 
              placeholder="Search by name, location, category..."
              id="headerSearch"
              autocomplete="off"
              autocapitalize="none"
              spellcheck="false"
            >
          </div>
          
        </div>

        <!-- Actions -->
        <div class="header-actions">
          <!-- Mobile Search Trigger (visible only on mobile) -->
          <button class="mobile-search-trigger" id="mobileSearchTrigger" aria-label="Search">
            <i class="fas fa-search"></i>
          </button>
          <!-- Safe Search toggle -->
          <button class="safe-search-toggle" id="safeSearchToggle" aria-label="Toggle Safe Search (blur images)" title="Safe Search: Browse comfortably in public">
            <i class="fas fa-eye-slash"></i>
          </button>
          <!-- Dark mode toggle -->
          <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
            <i class="fas fa-moon"></i>
          </button>
          <!-- Mobile menu toggle only -->
          <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Menu">
            <i class="fas fa-bars"></i>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Mobile Search Modal -->
  <div class="mobile-search-modal" id="mobileSearchModal">
    <div class="mobile-search-header">
      <button class="mobile-search-back" id="mobileSearchBack" aria-label="Close search">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="mobile-search-input-wrapper">
        <i class="fas fa-search mobile-search-icon"></i>
        <input type="text" class="mobile-search-input" id="mobileSearchInput" placeholder="Search by name, location, category..." autocomplete="off" autocapitalize="none" spellcheck="false">
      </div>
    </div>
    <div class="mobile-search-content">
      <div class="mobile-search-label">POPULAR SEARCHES</div>
      <div class="mobile-search-suggestions" id="mobileSearchSuggestions">
        <!-- Populated dynamically -->
      </div>
    </div>
  </div>

  <!-- Safe Search Modal (First-Time Consent) -->
  <div id="safeSearchModal" class="safe-search-modal" role="dialog" aria-labelledby="safeSearchModalTitle" aria-modal="true">
    <div class="safe-search-modal-content">
      <div class="safe-search-modal-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <h2 id="safeSearchModalTitle">Browse Safely in Public?</h2>
      <p>
        Enable <strong>Safe Search</strong> to blur images so you can comfortably browse at work, on the bus, or anywhere public. 
        You can toggle this anytime using the shield icon in the header.
      </p>
      <div class="safe-search-modal-actions">
        <button class="safe-search-modal-btn safe-search-modal-btn-primary" id="enableSafeSearch">
          <i class="fas fa-shield-alt"></i> Enable Safe Search
        </button>
        <button class="safe-search-modal-btn safe-search-modal-btn-secondary" id="dismissSafeSearch">
          No Thanks, I'm in Private
        </button>
      </div>
      <div class="safe-search-modal-footer">
        You can change this setting anytime by clicking the <i class="fas fa-eye-slash"></i> icon in the header
      </div>
    </div>
  </div>

  <!-- Mobile Drawer -->
  <div id="drawerOverlay" class="drawer-overlay" tabindex="-1" aria-hidden="true"></div>
  <nav id="mobileDrawer" class="mobile-drawer" aria-hidden="true" aria-labelledby="mobileMenuToggle">
    <button class="drawer-close" id="drawerClose" aria-label="Close menu">×</button>
    <a href="/">Home</a>
    
    <!-- Categories collapsible section -->
    <div class="drawer-categories-toggle" id="drawerCategoriesToggle">
      <div class="icon-text">
        <i class="fas fa-th"></i>
        <span>Categories</span>
      </div>
      <i class="fas fa-chevron-down chevron"></i>
    </div>
    <div id="drawerCategoriesSection">
      <div class="drawer-categories-label">MOST POPULAR CATEGORIES</div>
      <div id="drawerCategories">
        <!-- Populated dynamically from config/categories.js -->
      </div>
      <a href="/categories/" class="drawer-view-all-btn">View All Categories</a>
    </div>
  </nav>

  <!-- Breadcrumbs -->
  <nav class="breadcrumbs-wrapper" aria-label="Breadcrumb">
    <ol class="breadcrumbs" itemscope itemtype="https://schema.org/BreadcrumbList">
      <li class="breadcrumb-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a href="/" itemprop="item" class="breadcrumb-home">
          <i class="fas fa-home" aria-hidden="true"></i>
          <span itemprop="name">Home</span>
        </a>
        <meta itemprop="position" content="1" />
      </li>
      <li class="breadcrumb-separator" aria-hidden="true">/</li>
      <li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <span itemprop="item" itemscope itemtype="https://schema.org/WebPage" itemid="https://fanspedia.net/">
          <span itemprop="name">Search</span>
        </span>
        <meta itemprop="position" content="2" />
      </li>
    </ol>
  </nav>

  <div class="container text-center">
  <h1 class="mb-4" style="color:#00aff0; font-weight:800;">The Best Onlyfans Search Engine - Find OF Accounts FAST</h1>

    <!-- Search bar -->
    <div class="mb-3 search-group">
      <div class="input-group input-group-lg">
        <input id="search" type="text" class="form-control" placeholder='Type: "milf" "Texas" "piercings"' aria-label="Search creators" inputmode="search" enterkeyhint="search" autocomplete="off" autocapitalize="none" spellcheck="false" />
  <button class="clear-search" id="clearSearch" type="button" aria-label="Clear search">×</button>
        <button id="searchBtn" class="btn btn-search" type="button">
          <span class="spinner" aria-hidden="true"></span>
          <span class="btn-label">Search</span>
        </button>
      </div>
    </div>

  <!-- Recent searches -->
  <div id="recentSearches" class="recent-searches"></div>

  <!-- Favorites bar -->
  <div id="favoritesBar" class="favorites-bar" aria-label="Favorites" aria-live="polite"></div>

    <!-- Filters (sticky) -->
    <div class="filters-container">
      <div class="d-flex justify-content-center align-items-center flex-wrap gap-3 filters">
        <div class="form-check form-switch">
          <input id="verified" type="checkbox" class="form-check-input me-2">
          <label for="verified" class="form-check-label me-4">Verified only</label>
        </div>

        <div class="form-check form-switch">
          <input id="bundles" type="checkbox" class="form-check-input me-2">
          <label for="bundles" class="form-check-label me-4">Bundle subscriptions</label>
        </div>

        <div class="price-group">
          <label for="price" class="form-label me-2">Max price ($)</label>
          <input id="price" type="range" class="form-range price-range" min="0" max="100" value="100" step="1">
          <span id="price-value" class="ms-2 price-value">100</span>
        </div>

        <button id="resetFilters" type="button" class="btn-reset">Reset filters</button>
      </div>
    </div>

    <!-- Active filters chips -->
    <div id="activeFilters" class="recent-searches" aria-live="polite"></div>

    <!-- Results -->
    <div id="results" class="row g-3 justify-content-center"></div>
    <p id="error" class="error"></p>
    <p id="status" style="color: #888; margin-top: 10px; font-size: 14px;"></p>
    
    <!-- Load More Button -->
    <div id="loadMoreContainer" class="text-center my-4" style="display: none;">
      <button id="loadMoreBtn" class="load-more-btn">
        <span class="btn-text">Load More Creators</span>
        <span class="btn-icon">↓</span>
      </button>
      <p id="loadedCount" class="mt-2" style="color: #888; font-size: 14px; margin-bottom: 0;"></p>
    </div>

    <!-- Trending Reels Section -->
    <section id="trendingReels" class="trending-reels-section">
      <h2 class="trending-title">Trending <span style="color: #00AFF0;">Reels</span></h2>
      <div class="reels-grid" id="reelsGrid">
        <!-- Reels will be populated here -->
      </div>
    </section>
    
    <!-- SEO Content Section -->
    <section class="mt-5 pt-5" style="max-width: 900px; margin-left: auto; margin-right: auto; text-align: left; border-top: 1px solid var(--border-color);">
      <h2 style="color: #00AFF0; font-weight: 700; font-size: 28px; margin-bottom: 20px;">Find the Best OnlyFans Creators - Free Search Engine</h2>
      
      <p style="color: var(--text-primary); font-size: 16px; line-height: 1.7; margin-bottom: 20px;">
        Welcome to <strong>fanspedia.net</strong>, the leading <strong>OnlyFans search engine</strong> with over <strong>10,000 verified creators</strong>. Our platform helps fans discover and connect with their favorite <strong>OnlyFans models</strong> through advanced filtering options including categories, price ranges, verified status, bundle subscriptions, and more.
      </p>

      <h3 style="color: #00AFF0; font-weight: 600; font-size: 22px; margin-bottom: 15px; margin-top: 30px;">How to Search for OnlyFans Creators</h3>
      
      <p style="color: var(--text-primary); font-size: 16px; line-height: 1.7; margin-bottom: 15px;">
        Our <strong>OnlyFans finder</strong> makes it easy to search through thousands of profiles. Simply enter keywords like location (e.g., "Texas", "California"), categories (e.g., "fitness", "cosplay", "MILF"), or social media usernames (TikTok, Instagram) to find creators that match your interests.
      </p>

      <h3 style="color: #00AFF0; font-weight: 600; font-size: 22px; margin-bottom: 15px; margin-top: 30px;">Filter by Price, Verified Status & More</h3>
      
      <ul style="color: var(--text-primary); font-size: 16px; line-height: 1.8; margin-bottom: 20px;">
        <li><strong>Verified Models:</strong> Find only verified OnlyFans creators with the checkmark badge</li>
        <li><strong>Price Filtering:</strong> Search for free OnlyFans accounts or set your max subscription price</li>
        <li><strong>Bundle Subscriptions:</strong> Discover creators offering special bundle deals and discounts</li>
        <li><strong>Category Search:</strong> Filter by interests, location, body type, and other preferences</li>
      </ul>

      <h3 style="color: #00AFF0; font-weight: 600; font-size: 22px; margin-bottom: 15px; margin-top: 30px;">Why Use Our OnlyFans Search Engine?</h3>
      
      <p style="color: var(--text-primary); font-size: 16px; line-height: 1.7; margin-bottom: 20px;">
        Unlike OnlyFans' limited native search, our platform indexes <strong>10k+ OnlyFans girls</strong> and provides powerful search filters to help you find exactly what you're looking for. Whether you're searching for <strong>top OnlyFans creators</strong>, free accounts, or specific categories, our database is updated daily with the latest profiles.
      </p>

      <p style="color: var(--text-primary); font-size: 16px; line-height: 1.7; margin-bottom: 20px;">
        Start your search now and discover the <strong>best OnlyFans girls</strong> matching your preferences. Our free OnlyFans search tool helps you explore verified creators, compare subscription prices, and find exclusive content from thousands of models worldwide.
      </p>
    </section>
    
    <!-- Back to top button -->
    <button id="backToTop" aria-label="Back to top" title="Back to top">↑</button>
  </div>

  <script type="module">
    // ============================================
    // DYNAMIC CATEGORY NAVIGATION (uses shared config)
    // ============================================
  import { popularCategories, categoryToSlug } from '/config/categories.js?v=20251121-4';
    
    // Render desktop dropdown menu
    const catMenu = document.getElementById('categoriesMenu');
    if (catMenu) {
      const menuHTML = popularCategories.map(cat => {
        const slug = categoryToSlug(cat);
        const label = cat.split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
        return `<a role="menuitem" href="/categories/${slug}/">${label}</a>`;
      }).join('') + '<div class="divider"></div><a class="view-all" role="menuitem" href="/categories/">Browse all categories →</a>';
      catMenu.innerHTML = menuHTML;
    }
    
    // Render mobile drawer categories
    const drawerCats = document.getElementById('drawerCategories');
    if (drawerCats) {
      const drawerHTML = popularCategories.map(cat => {
        const slug = categoryToSlug(cat);
        const label = cat.split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
        return `<a href="/categories/${slug}/">${label}</a>`;
      }).join('');
      drawerCats.innerHTML = drawerHTML;
    }
    
    // Wire up categories toggle
    const drawerCategoriesToggle = document.getElementById('drawerCategoriesToggle');
    const drawerCategoriesSection = document.getElementById('drawerCategoriesSection');
    if (drawerCategoriesToggle && drawerCategoriesSection) {
      drawerCategoriesToggle.addEventListener('click', () => {
        drawerCategoriesSection.classList.toggle('open');
      });
    }
  </script>

  <script>
    // ============================================
    // DARK MODE TOGGLE
    // ============================================
    const themeToggle = document.getElementById('themeToggle');
    const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    
    // Get saved theme or use system preference
    function getCurrentTheme() {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) return savedTheme;
      // Default to light mode
      return 'light';
    }
    
    // Apply theme
    function applyTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      const icon = themeToggle.querySelector('i');
      if (theme === 'dark') {
        icon.className = 'fas fa-sun';
        themeToggle.setAttribute('aria-label', 'Switch to light mode');
      } else {
        icon.className = 'fas fa-moon';
        themeToggle.setAttribute('aria-label', 'Switch to dark mode');
      }
    }
    
    // Toggle theme
    function toggleTheme() {
      const currentTheme = getCurrentTheme();
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      localStorage.setItem('theme', newTheme);
      applyTheme(newTheme);
    }
    
    // Initialize theme on load
    applyTheme(getCurrentTheme());
    
    // Listen for toggle clicks
    if (themeToggle) {
      themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Listen for system theme changes
    prefersDarkScheme.addEventListener('change', (e) => {
      if (!localStorage.getItem('theme')) {
        applyTheme(e.matches ? 'dark' : 'light');
      }
    });

    // ============================================
    // TRENDING REELS FUNCTIONALITY
    // ============================================
    const reelsData = [];
    
    // Fetch and add creator 61786830 from Supabase
    async function extractVideoThumbnail(videoUrl) {
      return new Promise((resolve) => {
        try {
          const video = document.createElement('video');
          video.setAttribute('crossorigin', 'anonymous');
          video.src = videoUrl;
          video.style.display = 'none';
          document.body.appendChild(video);
          
          // Capture frame after a short delay
          video.onloadedmetadata = () => {
            video.currentTime = 0.5; // Capture at 0.5 seconds
          };
          
          video.onseeked = () => {
            try {
              const canvas = document.createElement('canvas');
              canvas.width = 320;
              canvas.height = 568;
              const ctx = canvas.getContext('2d');
              ctx.drawImage(video, 0, 0, 320, 568);
              const thumbnailUrl = canvas.toDataURL('image/jpeg', 0.8);
              document.body.removeChild(video);
              resolve(thumbnailUrl);
            } catch (e) {
              console.warn('Could not extract thumbnail:', e);
              document.body.removeChild(video);
              resolve(null);
            }
          };
          
          video.onerror = () => {
            console.warn('Could not load video for thumbnail:', videoUrl);
            document.body.removeChild(video);
            resolve(null);
          };
        } catch (e) {
          console.warn('Error extracting thumbnail:', e);
          resolve(null);
        }
      });
    }
    
    async function addCreatorReelFromDatabase(creatorId) {
      try {
        console.log(`🔄 Fetching creator ${creatorId} from API...`);
        
        // Use backend API endpoint to safely fetch from Supabase
        const response = await fetch(`/api/reel?id=${creatorId}`);
        
        console.log('📦 Response status:', response.status);
        
        if (!response.ok) {
          const errorText = await response.text();
          console.error('❌ API error:', response.status, errorText);
          return;
        }
        
        const result = await response.json();
        console.log('📊 Response data:', result);
        
        const creator = result.creator;
        
        if (creator) {
          console.log('👤 Creator found:', creator.username, 'Stories:', creator.stories);
          const storiesUrl = creator.stories;
          
          if (storiesUrl) {
            // Extract first frame from video as thumbnail
            const extractedThumbnail = await extractVideoThumbnail(storiesUrl);
            
            const newReel = {
              id: reelsData.length + 1,
              username: creator.username,
              avatar: creator.avatar ? `https://images.weserv.nl/?url=${encodeURIComponent(creator.avatar)}&w=120&h=120&fit=cover` : 'https://via.placeholder.com/120',
              videoUrl: storiesUrl,
              thumbnail: extractedThumbnail || (creator.avatar ? `https://images.weserv.nl/?url=${encodeURIComponent(creator.avatar)}&w=320&h=568&fit=cover` : 'https://via.placeholder.com/320x568'),
              caption: creator.name || `Check out ${creator.username}!`,
              likes: creator.favoritedcount ? `${(creator.favoritedcount / 1000).toFixed(0)}k` : '0',
              creatorId: parseInt(creatorId)
            };
            reelsData.push(newReel);
            console.log(`✅ Added creator ${creatorId} to reels with video thumbnail`);
            renderReels();
          } else {
            console.warn(`⚠️ Creator ${creatorId} found but stories field is empty or null`);
          }
        } else {
          console.warn(`⚠️ Creator ${creatorId} not found in database`);
        }
      } catch (error) {
        console.error(`❌ Error fetching creator ${creatorId}:`, error.message, error);
      }
    }
    
    function renderReels() {
      const reelsGrid = document.getElementById('reelsGrid');
      if (!reelsGrid) return;
      
      const reelsHTML = reelsData.map(reel => `
        <div class="reel-card" onclick="openReelModal(${reel.id})">
          <img src="${reel.thumbnail}" alt="${reel.username}" />
          <div class="reel-play-icon">
            <i class="fas fa-play"></i>
          </div>
          <div class="reel-onlyfans-badge">
            <i class="fas fa-check-circle"></i>
            <span>OnlyFans</span>
          </div>
          <div class="reel-overlay">
            <div class="reel-username">@${reel.username}</div>
            <div class="reel-caption">${reel.caption}</div>
            <div class="reel-stats">
              <div class="reel-stat">
                <i class="fas fa-heart"></i>
                <span>${reel.likes}</span>
              </div>
            </div>
          </div>
        </div>
      `).join('');
      
      reelsGrid.innerHTML = reelsHTML;
    }
    
    let currentReelIndex = 0;
    
    function openReelModal(reelId) {
      const reel = reelsData.find(r => r.id === reelId);
      if (!reel) return;
      
      // Store current index
      currentReelIndex = reelsData.findIndex(r => r.id === reelId);
      
      // Create modal if it doesn't exist
      let modal = document.getElementById('reelModal');
      if (!modal) {
        modal = document.createElement('div');
        modal.id = 'reelModal';
        modal.className = 'reel-modal';
        modal.innerHTML = `
          <div class="reel-modal-content">
            <div class="reel-media-wrapper" onclick="toggleReelPlayPause(event)">
              <div id="reelMediaContainer" style="width: 100%; height: 85vh; background: #000; display: flex; align-items: center; justify-content: center; cursor: pointer;">
                <video id="reelVideo" class="reel-modal-video" autoplay loop playsinline style="display: none;">
                  <source src="" type="video/mp4">
                </video>
                <img id="reelImage" class="reel-modal-video" style="display: none;" />
              </div>
              <div class="reel-controls-bar">
                <button class="reel-control-btn play-pause-btn" onclick="toggleReelPlayPauseBtn(event)" title="Play/Pause">
                  <i class="fas fa-play"></i>
                </button>
                <div class="reel-volume-control">
                  <button class="reel-control-btn" onclick="toggleReelMute(event)" title="Mute">
                    <i class="fas fa-volume-up"></i>
                  </button>
                  <input type="range" class="reel-volume-slider" id="reelVolumeSlider" min="0" max="100" value="100" oninput="setReelVolume(this.value)">
                </div>
                <button class="reel-control-btn reel-menu-btn" onclick="openReelMenu()" title="Menu">
                  <i class="fas fa-ellipsis-v"></i>
                </button>
              </div>
            </div>
            <div class="reel-modal-sidebar">
              <button class="reel-sidebar-close" onclick="closeReelModal()" title="Close">
                <i class="fas fa-times"></i>
              </button>
              <button class="reel-modal-btn" onclick="toggleReelLike()" title="Like">
                <i class="fas fa-heart"></i>
                <span class="reel-modal-btn-label" id="reelLikes"></span>
              </button>
              <button class="reel-modal-btn" onclick="viewProfile()" title="OnlyFans">
                <i class="fas fa-check-circle"></i>
                <span class="reel-modal-btn-label">OnlyFans</span>
              </button>
              <button class="reel-modal-btn" onclick="shareReel()" title="Share">
                <i class="fas fa-share"></i>
                <span class="reel-modal-btn-label">Share</span>
              </button>
            </div>
            <div class="reel-modal-info">
              <div class="reel-modal-header">
                <img src="" alt="" class="reel-modal-avatar" id="reelAvatar" />
                <div style="flex: 1;">
                  <div class="reel-modal-username" id="reelUsername"></div>
                  <button onclick="viewProfile()" style="margin-top: 6px; padding: 6px 16px; font-size: 13px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; font-weight: 600; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(0,175,240,0.9)'; this.style.borderColor='transparent';" onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.borderColor='rgba(255,255,255,0.3)';">
                    View Profile
                  </button>
                </div>
              </div>
              <div class="reel-modal-caption" id="reelCaption"></div>
            </div>
            <div class="reel-nav-arrows">
              <button class="reel-nav-arrow-btn reel-nav-up" onclick="prevReel()" title="Previous reel">
                <i class="fas fa-chevron-up"></i>
              </button>
              <button class="reel-nav-arrow-btn reel-nav-down" onclick="nextReel()" title="Next reel">
                <i class="fas fa-chevron-down"></i>
              </button>
            </div>
          </div>
        `;
        document.body.appendChild(modal);
      }
      
      // Detect if URL is image or video
      const url = reel.videoUrl;
      const isImage = /\.(jpg|jpeg|png|gif|webp)/i.test(url);
      
      const videoEl = document.getElementById('reelVideo');
      const imageEl = document.getElementById('reelImage');
      
      if (isImage) {
        // Show image, hide video
        videoEl.style.display = 'none';
        imageEl.style.display = 'block';
        imageEl.src = url;
      } else {
        // Show video, hide image
        imageEl.style.display = 'none';
        videoEl.style.display = 'block';
        videoEl.src = url;
      }
      
      // Update modal content
      document.getElementById('reelAvatar').src = reel.avatar;
      document.getElementById('reelUsername').textContent = '@' + reel.username;
      document.getElementById('reelCaption').textContent = reel.caption;
      document.getElementById('reelLikes').textContent = reel.likes;
      
      // Initialize audio state
      initializeReelAudio();
      
      // Store current reel data
      window.currentReel = reel;
      
      // Show modal
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function closeReelModal() {
      const modal = document.getElementById('reelModal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
        const video = document.getElementById('reelVideo');
        const image = document.getElementById('reelImage');
        if (video) {
          video.pause();
          video.src = '';
        }
        if (image) {
          image.src = '';
        }
      }
    }

    function toggleReelPlayPause(event) {
      // Only toggle if clicking directly on video (not on controls)
      if (event && event.target.closest('.reel-controls-bar')) {
        return;
      }
      
      const video = document.getElementById('reelVideo');
      const playBtn = document.querySelector('.play-pause-btn');
      if (video && video.style.display !== 'none') {
        if (video.paused) {
          video.play();
          if (playBtn) playBtn.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
          video.pause();
          if (playBtn) playBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
      }
    }

    // Direct button click handler - always works
    function toggleReelPlayPauseBtn(event) {
      event.stopPropagation();
      const video = document.getElementById('reelVideo');
      const playBtn = document.querySelector('.play-pause-btn');
      if (video && video.style.display !== 'none') {
        if (video.paused) {
          video.play();
          if (playBtn) playBtn.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
          video.pause();
          if (playBtn) playBtn.innerHTML = '<i class="fas fa-play"></i>';
        }
      }
    }

    // Store the last volume before muting
    let lastReelVolume = 100;

    function initializeReelAudio() {
      const video = document.getElementById('reelVideo');
      const muteBtn = document.querySelector('.reel-volume-control .reel-control-btn');
      const volumeSlider = document.getElementById('reelVolumeSlider');
      
      if (video && muteBtn && volumeSlider) {
        // Wait a tiny bit for video to be ready
        setTimeout(() => {
          video.muted = false;
          video.volume = 1.0;
          lastReelVolume = 100;
          volumeSlider.value = 100;
          muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
          console.log('✅ Audio initialized: unmuted, volume 100%');
        }, 100);
      }
    }

    function toggleReelMute(event) {
      if (event) event.stopPropagation();
      const video = document.getElementById('reelVideo');
      const muteBtn = document.querySelector('.reel-volume-control .reel-control-btn');
      const volumeSlider = document.getElementById('reelVolumeSlider');
      
      if (video && muteBtn && volumeSlider && video.style.display !== 'none') {
        if (video.muted) {
          // Unmute: restore previous volume
          video.muted = false;
          video.volume = lastReelVolume / 100;
          volumeSlider.value = lastReelVolume;
          muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
          console.log('🔊 Unmuted, volume:', lastReelVolume);
        } else {
          // Mute: save current volume and mute
          lastReelVolume = parseInt(volumeSlider.value);
          video.muted = true;
          muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
          console.log('🔇 Muted, saved volume:', lastReelVolume);
        }
      }
    }

    function setReelVolume(value) {
      const video = document.getElementById('reelVideo');
      const muteBtn = document.querySelector('.reel-volume-control .reel-control-btn');
      
      if (video && muteBtn && video.style.display !== 'none') {
        value = parseInt(value);
        lastReelVolume = value;
        video.volume = value / 100;
        
        // Auto-unmute when adjusting volume upward
        if (value > 0 && video.muted) {
          video.muted = false;
          muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
          console.log('🔊 Auto-unmuted, volume:', value);
        } else if (value === 0) {
          // Automatically mute at 0
          video.muted = true;
          muteBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
          console.log('🔇 Auto-muted at 0 volume');
        } else if (value > 0 && !video.muted) {
          muteBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
        }
      }
    }

    function openReelMenu() {
      console.log('Menu clicked - will add options here');
      // Placeholder for menu functionality
    }
    
    function toggleReelLike() {
      alert('Like functionality - connect to your favorites system');
    }
    
    function shareReel() {
      if (window.currentReel) {
        const url = `https://onlyfans.com/${encodeURIComponent(window.currentReel.username)}`;
        if (navigator.share) {
          navigator.share({
            title: `Check out @${window.currentReel.username} on OnlyFans`,
            text: window.currentReel.caption,
            url: url
          }).catch(err => console.log('Share cancelled'));
        } else {
          navigator.clipboard.writeText(url);
          alert('Link copied to clipboard!');
        }
      }
    }
    
    function viewProfile() {
      if (window.currentReel) {
        window.location.href = `https://onlyfans.com/${encodeURIComponent(window.currentReel.username)}`;
      }
    }
    
    function nextReel() {
      if (currentReelIndex < reelsData.length - 1) {
        currentReelIndex++;
        loadReelContent(reelsData[currentReelIndex]);
      }
    }
    
    function prevReel() {
      if (currentReelIndex > 0) {
        currentReelIndex--;
        loadReelContent(reelsData[currentReelIndex]);
      }
    }
    
    function loadReelContent(reel) {
      if (!reel) return;
      
      // Detect if URL is image or video
      const url = reel.videoUrl;
      const isImage = /\.(jpg|jpeg|png|gif|webp)/i.test(url);
      
      const videoEl = document.getElementById('reelVideo');
      const imageEl = document.getElementById('reelImage');
      
      if (isImage) {
        videoEl.style.display = 'none';
        imageEl.style.display = 'block';
        imageEl.src = url;
      } else {
        imageEl.style.display = 'none';
        videoEl.style.display = 'block';
        videoEl.src = url;
      }
      
      document.getElementById('reelAvatar').src = reel.avatar;
      document.getElementById('reelUsername').textContent = '@' + reel.username;
      document.getElementById('reelCaption').textContent = reel.caption;
      document.getElementById('reelLikes').textContent = reel.likes;
      window.currentReel = reel;
    }
    
    // Touch/swipe support
    let touchStartY = 0;
    let touchEndY = 0;
    
    document.addEventListener('touchstart', (e) => {
      const modal = document.getElementById('reelModal');
      if (modal && modal.classList.contains('active')) {
        touchStartY = e.touches[0].clientY;
      }
    });
    
    document.addEventListener('touchend', (e) => {
      const modal = document.getElementById('reelModal');
      if (modal && modal.classList.contains('active')) {
        touchEndY = e.changedTouches[0].clientY;
        handleSwipe();
      }
    });
    
    function handleSwipe() {
      const swipeDistance = touchStartY - touchEndY;
      const minSwipeDistance = 50;
      
      if (Math.abs(swipeDistance) > minSwipeDistance) {
        if (swipeDistance > 0) {
          // Swiped up - next reel
          nextReel();
        } else {
          // Swiped down - previous reel
          prevReel();
        }
      }
    }
    
    // Mouse wheel support
    document.addEventListener('wheel', (e) => {
      const modal = document.getElementById('reelModal');
      if (modal && modal.classList.contains('active')) {
        e.preventDefault();
        if (e.deltaY > 0) {
          nextReel();
        } else {
          prevReel();
        }
      }
    }, { passive: false });
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      const modal = document.getElementById('reelModal');
      if (modal && modal.classList.contains('active')) {
        if (e.key === 'Escape') {
          closeReelModal();
        } else if (e.key === 'ArrowDown' || e.key === 'ArrowRight') {
          e.preventDefault();
          nextReel();
        } else if (e.key === 'ArrowUp' || e.key === 'ArrowLeft') {
          e.preventDefault();
          prevReel();
        }
      }
    });
    
    // Close modal on background click
    document.addEventListener('click', (e) => {
      const modal = document.getElementById('reelModal');
      if (modal && e.target === modal) {
        closeReelModal();
      }
    });
    
    // Initialize reels when page loads
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() {
        renderReels();
        addCreatorReelFromDatabase('61786830');
        addCreatorReelFromDatabase('27502984');
        addCreatorReelFromDatabase('21895538');
        addCreatorReelFromDatabase('116155');
      });
    } else {
      renderReels();
      addCreatorReelFromDatabase('61786830');
      addCreatorReelFromDatabase('27502984');
      addCreatorReelFromDatabase('21895538');
      addCreatorReelFromDatabase('116155');
    }

    // ============================================
    // SAFE SEARCH FUNCTIONALITY
    // ============================================
    const safeSearchToggle = document.getElementById('safeSearchToggle');
    const safeSearchModal = document.getElementById('safeSearchModal');
    const enableSafeSearchBtn = document.getElementById('enableSafeSearch');
    const dismissSafeSearchBtn = document.getElementById('dismissSafeSearch');
    
    // Get saved Safe Search preference (default OFF for new users)
    function getSafeSearchState() {
      const saved = localStorage.getItem('safeSearch');
      return saved === 'true'; // Returns false by default
    }
    
    // Check if user has seen the modal before
    function hasSeenSafeSearchModal() {
      return localStorage.getItem('safeSearchModalShown') === 'true';
    }
    
    // Apply Safe Search state to UI
    function applySafeSearch(enabled) {
      if (enabled) {
        document.body.classList.add('safe-search-active');
        safeSearchToggle.classList.add('active');
        safeSearchToggle.querySelector('i').className = 'fas fa-eye-slash';
        safeSearchToggle.setAttribute('aria-label', 'Disable Safe Search (show images)');
        safeSearchToggle.setAttribute('title', 'Safe Search: ON (images blurred)');
      } else {
        document.body.classList.remove('safe-search-active');
        safeSearchToggle.classList.remove('active');
        safeSearchToggle.querySelector('i').className = 'fas fa-eye';
        safeSearchToggle.setAttribute('aria-label', 'Enable Safe Search (blur images)');
        safeSearchToggle.setAttribute('title', 'Safe Search: OFF (images visible)');
      }
      localStorage.setItem('safeSearch', enabled.toString());
      
      // Track analytics (privacy-friendly)
      try {
        if (typeof gtag !== 'undefined') {
          gtag('event', 'safe_search_toggle', {
            'event_category': 'engagement',
            'event_label': enabled ? 'enabled' : 'disabled',
            'non_interaction': true
          });
        }
      } catch (e) {
        // Ignore analytics errors
      }
    }
    
    // Toggle Safe Search
    function toggleSafeSearch() {
      const current = getSafeSearchState();
      applySafeSearch(!current);
    }
    
    // Show first-time modal
    function showSafeSearchModal() {
      if (safeSearchModal) {
        safeSearchModal.classList.add('show');
        document.body.style.overflow = 'hidden';
        
        // Focus trap for accessibility
        setTimeout(() => {
          const firstBtn = safeSearchModal.querySelector('button');
          if (firstBtn) firstBtn.focus();
        }, 100);
      }
    }
    
    // Hide modal
    function hideSafeSearchModal() {
      if (safeSearchModal) {
        safeSearchModal.classList.remove('show');
        document.body.style.overflow = '';
        localStorage.setItem('safeSearchModalShown', 'true');
      }
    }
    
    // Initialize Safe Search on page load
    function initSafeSearch() {
      // Apply saved preference
      const savedState = getSafeSearchState();
      applySafeSearch(savedState);
      
      // Show modal for first-time visitors (after 10 seconds of browsing)
      if (!hasSeenSafeSearchModal()) {
        setTimeout(showSafeSearchModal, 10000);
      }
      
      // Check URL parameter for forced state (?safe=1)
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.has('safe')) {
        const forcedState = urlParams.get('safe') === '1';
        applySafeSearch(forcedState);
      }
    }
    
    // Event listeners
    if (safeSearchToggle) {
      safeSearchToggle.addEventListener('click', toggleSafeSearch);
    }
    
    if (enableSafeSearchBtn) {
      enableSafeSearchBtn.addEventListener('click', () => {
        applySafeSearch(true);
        hideSafeSearchModal();
      });
    }
    
    if (dismissSafeSearchBtn) {
      dismissSafeSearchBtn.addEventListener('click', () => {
        applySafeSearch(false);
        hideSafeSearchModal();
      });
    }
    
    // Close modal on overlay click
    if (safeSearchModal) {
      safeSearchModal.addEventListener('click', (e) => {
        if (e.target === safeSearchModal) {
          applySafeSearch(false); // Default to OFF when dismissed via overlay
          hideSafeSearchModal();
        }
      });
    }
    
    // Keyboard shortcut: Alt+S to toggle
    document.addEventListener('keydown', (e) => {
      if (e.altKey && e.key.toLowerCase() === 's') {
        e.preventDefault();
        toggleSafeSearch();
      }
      
      // Escape key closes modal
      if (e.key === 'Escape' && safeSearchModal && safeSearchModal.classList.contains('show')) {
        applySafeSearch(false);
        hideSafeSearchModal();
      }
    });
    
    // Initialize Safe Search
    initSafeSearch();

    /* ============================================
       MOBILE SEARCH MODAL
       ============================================ */
    const mobileSearchModal = document.getElementById('mobileSearchModal');
    const mobileSearchTrigger = document.getElementById('mobileSearchTrigger');
    const mobileSearchBack = document.getElementById('mobileSearchBack');
    const mobileSearchInput = document.getElementById('mobileSearchInput');
    const mobileSearchSuggestions = document.getElementById('mobileSearchSuggestions');

    // Popular searches
    const popularSearches = ['milf', 'asian', 'big tits', 'trans', 'mature', 'latina', 'big ass', 'bbw'];

    // Populate suggestions
    function populateMobileSuggestions() {
      if (mobileSearchSuggestions) {
        const suggestionsHTML = popularSearches.map(term => 
          `<a href="/?q=${encodeURIComponent(term)}" class="mobile-search-suggestion">
            <i class="fas fa-fire"></i>
            <span>${term}</span>
          </a>`
        ).join('');
        mobileSearchSuggestions.innerHTML = suggestionsHTML;
      }
    }

    // Open mobile search
    function openMobileSearch() {
      if (mobileSearchModal) {
        mobileSearchModal.classList.add('active');
        document.body.style.overflow = 'hidden';
        setTimeout(() => {
          if (mobileSearchInput) mobileSearchInput.focus();
        }, 100);
      }
    }

    // Close mobile search
    function closeMobileSearch() {
      if (mobileSearchModal) {
        mobileSearchModal.classList.remove('active');
        document.body.style.overflow = '';
        if (mobileSearchInput) mobileSearchInput.value = '';
      }
    }

    // Event listeners
    if (mobileSearchTrigger) {
      mobileSearchTrigger.addEventListener('click', openMobileSearch);
    }

    if (mobileSearchBack) {
      mobileSearchBack.addEventListener('click', closeMobileSearch);
    }

    // Handle search submission
    if (mobileSearchInput) {
      mobileSearchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          const query = mobileSearchInput.value.trim();
          if (query) {
            window.location.href = `/?q=${encodeURIComponent(query)}`;
          }
        }
      });
    }

    // Initialize suggestions
    populateMobileSuggestions();

    // ============================================
    // HEADER FUNCTIONALITY
    // ============================================

    // Scroll to results
    function scrollToResults() {
      const results = document.getElementById('results');
      if (results) {
        const offset = 100; // Account for fixed header
        const y = results.getBoundingClientRect().top + window.pageYOffset - offset;
        window.scrollTo({ top: y, behavior: 'smooth' });
      }
    }

    // Add scrolled class to header
    window.addEventListener('scroll', () => {
      const header = document.getElementById('mainHeader');
      if (header) {
        if (window.pageYOffset > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
      }
    });

    // Desktop Categories dropdown
    const catToggle = document.getElementById('categoriesToggle');
    const catMenuEl = document.getElementById('categoriesMenu');
    if (catToggle && catMenuEl) {
      catToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        const isOpen = catMenuEl.classList.toggle('open');
        catToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        catMenuEl.setAttribute('aria-hidden', isOpen ? 'false' : 'true');
      });
      document.addEventListener('click', (e) => {
        if (!catMenuEl.classList.contains('open')) return;
        if (!catMenuEl.contains(e.target) && e.target !== catToggle) {
          catMenuEl.classList.remove('open');
          catToggle.setAttribute('aria-expanded', 'false');
          catMenuEl.setAttribute('aria-hidden', 'true');
        }
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          catMenuEl.classList.remove('open');
          catToggle.setAttribute('aria-expanded', 'false');
          catMenuEl.setAttribute('aria-hidden', 'true');
        }
      });
    }

    // Mobile drawer
    const mobileToggle = document.getElementById('mobileMenuToggle');
    const drawer = document.getElementById('mobileDrawer');
    const overlay = document.getElementById('drawerOverlay');
    const drawerClose = document.getElementById('drawerClose');
    function openDrawer(){
      if (!drawer || !overlay) return;
      drawer.classList.add('open'); overlay.classList.add('open');
      drawer.setAttribute('aria-hidden','false'); overlay.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';
    }
    function closeDrawer(){ if (!drawer || !overlay) return; drawer.classList.remove('open'); overlay.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); overlay.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
    if (mobileToggle){ mobileToggle.addEventListener('click', (e)=>{ e.preventDefault(); openDrawer(); }); }
    if (overlay){ overlay.addEventListener('click', closeDrawer); }
    if (drawerClose){ drawerClose.addEventListener('click', closeDrawer); }
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeDrawer(); });

    // Connect header search to main search
  const headerSearch = document.getElementById('headerSearch');
  const headerSearchBtn = document.getElementById('headerSearchBtn');

    // ============================================
    // MAIN SEARCH VARIABLES
    // ============================================
    const searchInput = document.getElementById("search");
  const clearSearchBtn = document.getElementById("clearSearch");
    const verifiedToggle = document.getElementById("verified");
    const bundlesToggle = document.getElementById("bundles");
    const priceRange = document.getElementById("price");
    const priceValue = document.getElementById("price-value");
  const searchBtn = document.getElementById("searchBtn");
  const resetFiltersBtn = document.getElementById("resetFilters");
    const resultsDiv = document.getElementById("results");
    const errorDiv = document.getElementById("error");
    const statusDiv = document.getElementById("status");
  const activeFiltersDiv = document.getElementById("activeFilters");
    const backToTopBtn = document.getElementById("backToTop");
    const recentSearchesDiv = document.getElementById("recentSearches");
    const favoritesBar = document.getElementById('favoritesBar');
    
    let currentPage = 1;
    const pageSize = 50;
    let isLoading = false;
    let hasMore = true;
    // Preserve scroll when interacting with sticky filters
    let savedScrollY = 0;
  let lcpBoostApplied = false;
    
    function lockScroll() {
      savedScrollY = window.scrollY || window.pageYOffset || 0;
      console.log('Locked scroll at:', savedScrollY);
    }
    
    function restoreScroll() {
      if (savedScrollY > 0) {
        console.log('Restoring scroll to:', savedScrollY);
        // Use requestAnimationFrame to ensure DOM updates have completed
        requestAnimationFrame(() => {
          requestAnimationFrame(() => {
            window.scrollTo({ top: savedScrollY, left: 0, behavior: 'instant' });
          });
        });
      }
    }

    // --- Image optimization helpers (responsive + proxy cache) ---
    // We proxy OnlyFans images through images.weserv.nl to get cached, resized, and WebP-when-supported variants.
    // This keeps origin bandwidth low and fixes "short cache lifetime" warnings.
    function proxyImg(url, w, h) {
      try {
        if (!url || url.startsWith('/static/')) return url; // keep local placeholder as-is
        const noScheme = url.replace(/^https?:\/\//, '');
        // Force modern format for Chrome/Safari (broad support). If a very old browser hits this, weserv will 415 and our onerror fallback kicks in.
        return `https://images.weserv.nl/?url=${encodeURIComponent(noScheme)}&w=${w}&h=${h}&fit=cover&output=webp`;
      } catch {
        return url;
      }
    }

    function buildResponsiveSources(originalUrl) {
      // Maintain the 3:4 aspect ratio used in the card (width:height)
      const widths = [144, 240, 320, 480, 720];
      const srcset = widths
        .map(w => `${proxyImg(originalUrl, w, Math.round(w * 4 / 3))} ${w}w`)
        .join(', ');
      const src = proxyImg(originalUrl, 320, Math.round(320 * 4 / 3));
      const sizes = ' (max-width: 480px) 144px, (max-width: 768px) 240px, (max-width: 1200px) 320px, 360px ';
      return { src, srcset, sizes };
    }

    // Search button loading state helper
    function setSearchButtonLoading(loading) {
      if (!searchBtn) return;
      const label = searchBtn.querySelector('.btn-label');
      if (loading) {
        searchBtn.classList.add('loading');
        searchBtn.disabled = true;
        if (label) label.textContent = 'Searching…';
      } else {
        searchBtn.classList.remove('loading');
        searchBtn.disabled = false;
        if (label) label.textContent = 'Search';
      }
    }

    // Perform the API search
    async function performSearch(resetPage = true, append = false) {
      if (isLoading || (!hasMore && !resetPage)) return;
      isLoading = true;
      setSearchButtonLoading(true);
      
      if (resetPage) {
        // Avoid stale scroll restoration from prior filter interactions
        savedScrollY = 0;
        // If the user is scrolled below the results area, bring the results back to the top
        try {
          const resultsTop = resultsDiv.getBoundingClientRect().top + window.scrollY;
          const targetTop = Math.max(0, resultsTop - 80); // account for sticky filters/header
          if (window.scrollY > targetTop) {
            window.scrollTo({ top: targetTop, left: 0, behavior: 'instant' });
          }
        } catch {}
        currentPage = 1;
        hasMore = true;
        // Preserve current results height to prevent layout jump while loading
        resultsDiv.style.minHeight = resultsDiv.offsetHeight + 'px';
        resultsDiv.innerHTML = "";
        
        // Reset Load More button state on new search
        if (loadMoreBtn) {
          loadMoreBtn.disabled = false;
          loadMoreBtn.querySelector('.btn-text').textContent = 'Load More Creators';
        }
        if (loadMoreContainer) loadMoreContainer.style.display = 'none';
      }
      
  // Update URL and active filter chips to reflect current search state
  updateURL();
  updateActiveFilters();
  const q = searchInput.value.trim();
      const verified = verifiedToggle.checked;
      const bundles = bundlesToggle.checked;
      const price = priceRange.value;

      // Save search to recent if not empty
      if (resetPage && q) saveRecentSearch(q);

      if (!append) resultsDiv.innerHTML = "";
      errorDiv.textContent = "";
      statusDiv.textContent = append ? "Loading more..." : "Searching...";

      try {
        // Build API URL - only include verified param if checkbox is checked
        let apiUrl = `/api/search?q=${encodeURIComponent(q)}&price=${price}&page=${currentPage}&page_size=${pageSize}`;
        if (verified) {
          apiUrl += '&verified=true';
        }
        if (bundles) {
          apiUrl += '&bundles=true';
        }
        console.log('Fetching:', apiUrl);
        statusDiv.textContent = `Loading page ${currentPage}...`;
        
        const response = await fetch(apiUrl);
        console.log('Response status:', response.status);
        statusDiv.textContent = `Response: ${response.status}`;
        
        if (!response.ok) {
          const errorText = await response.text();
          console.error('API error response:', errorText);
          statusDiv.textContent = `API Error: ${response.status}`;
          throw new Error(`HTTP error: ${response.status} - ${errorText}`);
        }

        // Safely parse response
        const text = await response.text();
        console.log('Response text length:', text.length);
        let data;
        try {
          data = JSON.parse(text);
          console.log('Parsed data:', data.length, 'results');
          statusDiv.textContent = `Got ${data.length} results from API`;
        } catch (err) {
          console.error("Invalid JSON from backend:", text);
          statusDiv.textContent = "Invalid JSON from server";
          throw new Error("Invalid JSON from server");
        }

        if (!Array.isArray(data)) {
          console.error("Unexpected API data:", data);
          errorDiv.textContent = "Invalid data format.";
          statusDiv.textContent = "Data is not an array";
          isLoading = false;
          setSearchButtonLoading(false);
          resultsDiv.style.minHeight = '';
          restoreScroll();
          return;
        }

        if (data.length === 0) {
          console.warn('API returned 0 results for query:', { q, verified, price });
          resultsDiv.innerHTML = `<p class='text-muted'>No results found. Try adjusting filters or search term.</p>`;
          statusDiv.textContent = "0 results - try different search";
          isLoading = false;
          setSearchButtonLoading(false);
          hasMore = false;
          resultsDiv.style.minHeight = '';
          updateLoadMoreButton(); // Hide Load More button when no results
          restoreScroll();
          return;
        }

        console.log('Rendering', data.length, 'results');
        statusDiv.textContent = `Rendering ${data.length} results...`;

        // Render cards
  data.forEach((item, idx) => {
          // Use full avatar for best quality
          const img = item.avatar || item.avatar_c144 || "";
          const imgSrc = img && img.startsWith("http") ? img : "/static/no-image.png";
          const responsive = buildResponsiveSources(imgSrc);
          
          const name = item.name || "Unknown";
          const username = item.username || "—";
          const priceText = (item.subscribePrice && !isNaN(item.subscribePrice))
            ? `$${parseFloat(item.subscribePrice).toFixed(2)}`
            : "FREE";
          const verifiedIcon = item.isVerified ? "✅ " : "";
          const location = item.location || "";
          const bio = item.about || "";
          // Link directly to OnlyFans profile (not to internal creator page)
          const profileUrl = username !== "—" ? `https://onlyfans.com/${encodeURIComponent(username)}` : "#";

          const isFirstCard = resultsDiv.children.length === 0 && currentPage === 1;
          // Preload the first, above-the-fold image to help LCP
          if (isFirstCard) {
            try {
              const link = document.createElement('link');
              link.rel = 'preload';
              link.as = 'image';
              link.href = responsive.src;
              link.setAttribute('imagesrcset', responsive.srcset);
              link.setAttribute('imagesizes', responsive.sizes);
              document.head.appendChild(link);
            } catch {}
          }

          const col = document.createElement("div");
          col.className = "col-sm-6 col-md-4 col-lg-3 mb-4";
          const safeUsername = String(username).replace(/'/g, "\\'");
          const favSet = getFavoritesSet();
          const favActive = username !== "—" && favSet.has(username);
          const favChar = favActive ? '♥' : '♡';
          col.innerHTML = `
            <div class="card h-100">
              <button class="favorite-btn ${favActive ? 'active' : ''}" data-username="${safeUsername}" onclick="event.preventDefault(); toggleFavorite('${safeUsername}', this);">
                <span>${favChar}</span>
              </button>
              <img src="${responsive.src}" 
                   srcset="${responsive.srcset}"
                   sizes="${responsive.sizes}"
                   alt="${name}" 
                   width="270" 
                   height="360"
                   style="aspect-ratio: 3 / 4;"
                   ${isFirstCard ? 'loading="eager" fetchpriority="high"' : 'loading="lazy" fetchpriority="low"'} decoding="async"
                   referrerpolicy="no-referrer" 
                   onerror="if(this.src!='/static/no-image.png'){this.removeAttribute('srcset'); this.removeAttribute('sizes'); this.src='${imgSrc}';}"
                   onload="if(this.naturalWidth<=10||this.naturalHeight<=10){this.parentElement.parentElement.remove();}">
              <div class="card-body">
                <h5>${verifiedIcon}${name}</h5>
                <p class="username">@${username}</p>
                ${priceText === "FREE" 
                  ? `<p class="price-free">${priceText}</p>` 
                  : `<p class="price-tag">${priceText}</p>`}
                ${bio ? `<p class="bio-snippet">${bio}</p>` : ''}
                <a href="${profileUrl}" class="view-profile-btn">
                  View Profile
                </a>
              </div>
            </div>`;
          resultsDiv.appendChild(col);
        });
        
        statusDiv.textContent = `Showing ${resultsDiv.children.length} results`;
        // Mark results as loaded to remove min-height and prevent CLS
        resultsDiv.classList.add('loaded');
        // Ensure the actual above-the-fold image is prioritized (covers layout differences)
        if (!lcpBoostApplied && currentPage === 1) {
          try {
            const imgs = Array.from(resultsDiv.querySelectorAll('img'));
            const viewportH = window.innerHeight || 800;
            let best = null;
            let bestScore = -1;
            imgs.forEach(img => {
              const rect = img.getBoundingClientRect();
              if (rect.top < viewportH * 0.9 && rect.bottom > 0) {
                const visibleH = Math.min(rect.bottom, viewportH) - Math.max(0, rect.top);
                const area = Math.max(0, visibleH) * Math.max(1, rect.width);
                if (area > bestScore) { bestScore = area; best = img; }
              }
            });
            if (best) {
              best.setAttribute('loading', 'eager');
              best.setAttribute('fetchpriority', 'high');
              const href = best.currentSrc || best.src;
              if (href) {
                const link = document.createElement('link');
                link.rel = 'preload'; link.as = 'image'; link.href = href;
                document.head.appendChild(link);
              }
              lcpBoostApplied = true;
            }
          } catch {}
        }
        hasMore = data.length === pageSize;
        
  isLoading = false;
  setSearchButtonLoading(false);
        resultsDiv.style.minHeight = '';
        restoreScroll();
        
        // Update Load More button state (this will hide statusDiv if needed)
        updateLoadMoreButton();
      } catch (err) {
        console.error("Frontend error:", err);
        errorDiv.textContent = "Error loading results.";
        statusDiv.textContent = `Error: ${err.message}`;
  isLoading = false;
  setSearchButtonLoading(false);
        resultsDiv.style.minHeight = '';
        restoreScroll();
        
        // Hide Load More on error
        if (loadMoreContainer) loadMoreContainer.style.display = 'none';
      }
    }
    
    // Recent searches management
    const MAX_RECENT = 5;
    function getRecentSearches() {
      try {
        return JSON.parse(localStorage.getItem('recentSearches') || '[]');
      } catch {
        return [];
      }
    }
    function saveRecentSearch(query) {
      if (!query || query.trim().length === 0) return;
      let recent = getRecentSearches();
      recent = recent.filter(s => s !== query); // remove duplicates
      recent.unshift(query); // add to front
      recent = recent.slice(0, MAX_RECENT); // keep max 5
      localStorage.setItem('recentSearches', JSON.stringify(recent));
      renderRecentSearches();
    }
    function removeRecentSearch(query) {
      let recent = getRecentSearches();
      recent = recent.filter(s => s !== query);
      localStorage.setItem('recentSearches', JSON.stringify(recent));
      renderRecentSearches();
    }
    function renderRecentSearches() {
      const recent = getRecentSearches();
      if (recent.length === 0) {
        recentSearchesDiv.innerHTML = '';
        return;
      }
      recentSearchesDiv.innerHTML = recent.map(q => 
        `<div class="search-chip" onclick="applyRecentSearch('${q.replace(/'/g, "\\'")}')">
          <span>${q}</span>
          <span class="remove" onclick="event.stopPropagation(); removeRecentSearch('${q.replace(/'/g, "\\'")}')">&times;</span>
        </div>`
      ).join('');
    }
    function applyRecentSearch(query) {
      searchInput.value = query;
      performSearch(true);
    }
  // Render on load
  renderRecentSearches();
  renderFavoritesBar();
  updateWishlistCounter && updateWishlistCounter();

    // Favorites management (persist in localStorage)
    function getFavoritesSet() {
      try {
        const raw = localStorage.getItem('favorites') || '[]';
        const arr = JSON.parse(raw);
        return new Set(Array.isArray(arr) ? arr : []);
      } catch { return new Set(); }
    }
    function saveFavoritesSet(set) {
      try { localStorage.setItem('favorites', JSON.stringify(Array.from(set))); } catch {}
    }
    function toggleFavorite(username, btnEl) {
      if (!username) return;
      const set = getFavoritesSet();
      let active;
      if (set.has(username)) { set.delete(username); active = false; }
      else { set.add(username); active = true; }
      saveFavoritesSet(set);
      // reflect state in UI
      if (btnEl) {
        btnEl.classList.toggle('active', active);
        const s = btnEl.querySelector('span');
        if (s) s.textContent = active ? '♥' : '♡';
      }
      updateFavoriteButtons(username, active);
      renderFavoritesBar();
      updateWishlistCounter && updateWishlistCounter();
    }
    window.toggleFavorite = toggleFavorite;

    function updateFavoriteButtons(username, active) {
      try {
        const buttons = document.querySelectorAll(`.favorite-btn[data-username="${CSS.escape(username)}"]`);
        buttons.forEach(b => {
          b.classList.toggle('active', active);
          const s = b.querySelector('span');
          if (s) s.textContent = active ? '♥' : '♡';
        });
      } catch {}
    }

    function renderFavoritesBar() {
      if (!favoritesBar) return;
      const set = getFavoritesSet();
      const list = Array.from(set);
      if (list.length === 0) {
        favoritesBar.style.display = 'none';
        favoritesBar.innerHTML = '';
        return;
      }
      favoritesBar.style.display = 'flex';
      favoritesBar.innerHTML = list.map(u => {
        const safe = String(u).replace(/'/g, "\\'");
        const url = `https://onlyfans.com/${encodeURIComponent(u)}`;
        return `<div class="favorite-chip" data-username="${safe}" onclick="window.open('${url}','_blank')">
          <span class=\"heart\">♥</span>
          <a class=\"open\" href=\"${url}\" target=\"_blank\" rel=\"noopener\">@${u}</a>
          <button class=\"remove\" aria-label=\"Remove\" onclick=\"event.stopPropagation(); toggleFavorite('${safe}');\">&times;</button>
        </div>`;
      }).join('');
    }

    function updateWishlistCounter() {
      try {
        const set = getFavoritesSet();
        const badge = document.querySelector('.wishlist-count');
        if (!badge) return;
        const count = set.size;
        if (count > 0) {
          badge.textContent = count > 99 ? '99+' : String(count);
          badge.style.display = 'flex';
        } else {
          badge.style.display = 'none';
        }
      } catch {}
    }

    // Load More Button functionality (replaces infinite scroll)
    const loadMoreContainer = document.getElementById('loadMoreContainer');
    const loadMoreBtn = document.getElementById('loadMoreBtn');
    const loadedCountEl = document.getElementById('loadedCount');
    
    function updateLoadMoreButton() {
      const totalLoaded = resultsDiv.children.length;
      const statusDiv = document.getElementById('status');
      
      if (hasMore && totalLoaded > 0) {
        loadMoreContainer.style.display = 'block';
        loadedCountEl.textContent = `Showing ${totalLoaded} creators`;
        // Hide the status text only after results are loaded
        if (statusDiv) statusDiv.style.display = 'none';
        
        // After 200 results, add motivational message
        if (totalLoaded >= 200) {
          loadedCountEl.textContent = `You've explored ${totalLoaded} creators! 🔥`;
        }
      } else if (totalLoaded > 0 && !hasMore) {
        loadMoreContainer.style.display = 'block';
        loadMoreBtn.disabled = true;
        loadMoreBtn.querySelector('.btn-text').textContent = 'All Results Loaded';
        loadedCountEl.textContent = `You've seen all ${totalLoaded} matching creators`;
        // Hide the status text
        if (statusDiv) statusDiv.style.display = 'none';
      } else {
        loadMoreContainer.style.display = 'none';
        // Show status text when no Load More button (loading/error states)
        if (statusDiv) statusDiv.style.display = 'block';
      }
    }
    
    if (loadMoreBtn) {
      loadMoreBtn.addEventListener('click', () => {
        if (isLoading || !hasMore) return;
        currentPage++;
        performSearch(false, true);
      });
    }

    // Back to top toggle
    window.addEventListener('scroll', () => {
      if (!backToTopBtn) return;
      if (window.scrollY > 600) backToTopBtn.classList.add('visible');
      else backToTopBtn.classList.remove('visible');
    });
    if (backToTopBtn) {
      backToTopBtn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    // Search only on explicit action (Enter key or Search button)
    // Input event only toggles the clear button visibility; no auto-search while typing
    searchInput.addEventListener("input", () => {
      const hasValue = searchInput.value.trim().length > 0;
      // Toggle clear button
      if (hasValue) {
        clearSearchBtn.classList.add("visible");
      } else {
        clearSearchBtn.classList.remove("visible");
      }
      // Enable/disable search button
      if (searchBtn) {
        searchBtn.disabled = !hasValue;
      }
    });
    // Trigger search on Enter key
    searchInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        performSearch(true);
      }
    });

    // Mark interaction early to preserve scroll
    verifiedToggle.addEventListener("pointerdown", lockScroll);
    verifiedToggle.addEventListener("touchstart", lockScroll, { passive: true });
    verifiedToggle.addEventListener("change", () => { lockScroll(); performSearch(true); });

    bundlesToggle.addEventListener("pointerdown", lockScroll);
    bundlesToggle.addEventListener("touchstart", lockScroll, { passive: true });
    bundlesToggle.addEventListener("change", () => { lockScroll(); performSearch(true); });
    if (searchBtn) {
      // Search button does not alter scroll intentionally
      searchBtn.addEventListener("click", () => performSearch(true));
    }
    if (resetFiltersBtn) {
      resetFiltersBtn.addEventListener('click', () => {
        lockScroll();
        searchInput.value = '';
        clearSearchBtn.classList.remove('visible');
        verifiedToggle.checked = false;
        bundlesToggle.checked = false;
        priceRange.value = '100';
        priceValue.textContent = '100';
        performSearch(true);
      });
    }
    // Clear search functionality
    clearSearchBtn.addEventListener("click", () => {
      searchInput.value = "";
      clearSearchBtn.classList.remove("visible");
      searchInput.focus();
      performSearch(true);
    });
    // Update value live while dragging, but search only on release to avoid jank
    priceRange.addEventListener("pointerdown", lockScroll);
    priceRange.addEventListener("touchstart", lockScroll, { passive: true });
    priceRange.addEventListener("input", () => {
      priceValue.textContent = priceRange.value;
    });
    priceRange.addEventListener("change", () => { lockScroll(); performSearch(true); });
    
    // ============================================
    // HEADER SEARCH INTEGRATION
    // ============================================
    
    // Header search integration (no live sync; independent inputs)
    if (headerSearch) {
      // Clear only on first focus, not every focus (so edits preserve content)
      let headerCleared = false;
      let mainCleared = false;
      headerSearch.addEventListener('focus', () => {
        if (headerCleared) return;
        headerCleared = true;
        try {
          headerSearch.value = '';
          if (clearSearchBtn) clearSearchBtn.classList.remove('visible');
          if (searchBtn) searchBtn.disabled = true;
        } catch {}
      }, { passive: true });
      if (searchInput) {
        searchInput.addEventListener('focus', () => {
          if (mainCleared) return;
          mainCleared = true;
          try {
            searchInput.value = '';
            if (clearSearchBtn) clearSearchBtn.classList.remove('visible');
            if (searchBtn) searchBtn.disabled = true;
          } catch {}
        }, { passive: true });
      }

      // Header search button click (if present)
      if (headerSearchBtn) {
        headerSearchBtn.addEventListener('click', () => {
          searchInput.value = headerSearch.value;
          performSearch(true);
        });
      }

      // Header search Enter key
      headerSearch.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          searchInput.value = headerSearch.value;
          performSearch(true);
        }
      });
    }

    // Header quick filter chips removed per design change

    // Sync with header chips not needed anymore

    // DB count badge removed; no periodic updates required

    // ============================================
    // URL query parameter management for shareable searches
    // ============================================
    function updateURL() {
      const params = new URLSearchParams();
      const query = searchInput.value.trim();
      if (query) params.set('q', query);
      if (verifiedToggle.checked) params.set('verified', 'true');
      if (bundlesToggle.checked) params.set('bundles', 'true');
      if (priceRange.value !== '100') params.set('max', priceRange.value);
      
      const newURL = params.toString() ? `${window.location.pathname}?${params.toString()}` : window.location.pathname;
      window.history.replaceState({}, '', newURL);
    }

    function loadFromURL() {
      const params = new URLSearchParams(window.location.search);
      if (params.has('q')) {
        searchInput.value = params.get('q');
        if (searchInput.value.trim()) clearSearchBtn.classList.add('visible');
      }
      if (params.has('verified')) verifiedToggle.checked = params.get('verified') === 'true';
      if (params.has('bundles')) bundlesToggle.checked = params.get('bundles') === 'true';
      if (params.has('max')) {
        priceRange.value = params.get('max');
        priceValue.textContent = params.get('max');
      }
      // Render initial active filters from URL
      updateActiveFilters();
    }

    // Render active filter chips and attach remove actions
    function updateActiveFilters() {
      if (!activeFiltersDiv) return;
      const chips = [];
      if (verifiedToggle.checked) {
        chips.push(`<div class="search-chip" data-filter="verified">Verified only <span class="remove" aria-label="Remove">×</span></div>`);
      }
      if (bundlesToggle.checked) {
        chips.push(`<div class="search-chip" data-filter="bundles">Bundles <span class="remove" aria-label="Remove">×</span></div>`);
      }
      if (priceRange.value !== '100') {
        chips.push(`<div class="search-chip" data-filter="max">Max $${priceRange.value} <span class="remove" aria-label="Remove">×</span></div>`);
      }
      activeFiltersDiv.innerHTML = chips.join('');
      activeFiltersDiv.style.display = chips.length ? 'flex' : 'none';
    }

    // Remove chip via event delegation
    if (activeFiltersDiv) {
      activeFiltersDiv.addEventListener('click', (e) => {
        const chip = e.target.closest('.search-chip');
        if (!chip) return;
        const type = chip.getAttribute('data-filter');
        if (type === 'verified') verifiedToggle.checked = false;
        if (type === 'bundles') bundlesToggle.checked = false;
        if (type === 'max') { priceRange.value = '100'; priceValue.textContent = '100'; }
        performSearch(true);
      });
    }    // Set initial search button state
    if (searchBtn) {
      searchBtn.disabled = !searchInput.value.trim();
    }



    // SSR Detection - Skip initial load if server already rendered content
    const isSSR = document.body.dataset.ssr === 'true';
    const initialCreatorCount = parseInt(document.body.dataset.initialCreators || '0', 10);
    
    if (isSSR && initialCreatorCount > 0) {
      // Content already rendered by server - just hydrate interactive features
      console.log(`SSR detected: ${initialCreatorCount} creators pre-rendered`);
      statusDiv.textContent = "";
      currentPage = 1; // SSR renders page 1
      hasMore = true; // Assume more results available
      
      // Attach favorite button event listeners to SSR-rendered cards
      document.querySelectorAll('.favorite-btn').forEach(btn => {
        const creatorId = btn.dataset.id;
        if (favorites.includes(creatorId)) {
          btn.classList.add('active');
          btn.querySelector('i').className = 'fas fa-heart';
        }
        // Event listener already attached via event delegation, no action needed
      });
      
      // Show Load More button if we have results
      if (loadMoreContainer && resultsDiv.children.length > 0) {
        loadMoreContainer.style.display = 'block';
        updateLoadedCount();
      }
      
      // Load URL params for filters (user might have bookmarked a filtered view)
      loadFromURL();
      
    } else {
      // No SSR or empty results - perform initial client-side search
      statusDiv.textContent = "Loading popular creators...";
      loadFromURL(); // Load search state from URL
      performSearch(true);
    }
  </script>

  <!-- Footer -->
  <footer class="modern-footer">
    <div class="footer-container">
      <!-- Main Footer Content -->
      <div class="footer-grid">
        <!-- Column 1: Brand -->
        <div class="footer-column footer-brand">
          <div class="footer-logo">
            <div class="footer-logo-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor" opacity="0.8"/>
                <path d="M2 17L12 22L22 17V12L12 17L2 12V17Z" fill="currentColor"/>
              </svg>
            </div>
            <div class="footer-logo-text">
              <span class="footer-logo-main">FansPedia</span>
              <span class="footer-logo-sub">Your Premium Creator Directory</span>
            </div>
          </div>
          <p class="footer-description">
            Discover and connect with verified OnlyFans creators. Updated daily with 9,500+ profiles across all categories.
          </p>
          <!-- Social Links -->
          <div class="footer-social">
            <a href="https://x.com/fanspedia" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="X (Twitter)">
              <span class="social-icon-x" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M18.244 2H21.5l-6.52 7.455L22.25 22h-7.03l-4.64-6.08L4.9 22H1.64l7.02-8.04L1.25 2h7.19l4.27 5.64L18.245 2Z"/></svg></span>
            </a>
            <a href="https://facebook.com" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Facebook">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="https://instagram.com" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="https://www.youtube.com/@FansPediaOfficial" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="YouTube">
              <i class="fab fa-youtube"></i>
            </a>
            <a href="https://www.tiktok.com/@fanspedia" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="TikTok">
              <i class="fab fa-tiktok"></i>
            </a>
          </div>
        </div>

        <!-- Column 2: Popular Categories -->
        <div class="footer-column">
          <h3 class="footer-heading">Popular Categories</h3>
          <ul class="footer-links">
            <li><a href="/categories/verified">Verified Creators</a></li>
            <li><a href="/categories/free">Free OnlyFans</a></li>
            <li><a href="/categories/cosplay">Cosplay Models</a></li>
            <li><a href="/categories/fitness">Fitness & Wellness</a></li>
            <li><a href="/categories/gaming">Gaming Creators</a></li>
            <li><a href="/categories">View All Categories</a></li>
          </ul>
        </div>

        <!-- Column 3: Resources -->
        <div class="footer-column">
          <h3 class="footer-heading">Resources</h3>
          <ul class="footer-links">
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Creator Guide</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">How to Subscribe</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Safety Tips</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">FAQ</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Blog</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Support</a></li>
          </ul>
        </div>

        <!-- Column 4: Legal & Info -->
        <div class="footer-column">
          <h3 class="footer-heading">Legal & Info</h3>
          <ul class="footer-links">
            <li><a href="#" onclick="alert('Coming soon!'); return false;">About Us</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Contact</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Terms of Service</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Privacy Policy</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">DMCA Policy</a></li>
            <li><a href="#" onclick="alert('Coming soon!'); return false;">Cookie Policy</a></li>
          </ul>
        </div>
      </div>

      <!-- Footer Bottom -->
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <p class="footer-copyright">
            © 2025 fanspedia.net - All rights reserved
          </p>
          <div class="footer-stats">
            <span class="stat-badge">
              <i class="fas fa-check-circle"></i>
              9,500+ Verified Creators
            </span>
            <span class="stat-badge">
              <i class="fas fa-sync-alt"></i>
              Updated Daily
            </span>
          </div>
        </div>
        <p class="footer-disclaimer">
          This website is an independent directory and is not affiliated with OnlyFans. All trademarks belong to their respective owners.
        </p>
      </div>
    </div>
  </footer>

  <style>
    /* ============================================
       MODERN FOOTER STYLES
       ============================================ */
    .modern-footer {
      background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      border-top: 1px solid var(--border-color);
      margin-top: 80px;
      padding: 60px 0 0;
      position: relative;
    }

    .modern-footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent 0%, #00AFF0 50%, transparent 100%);
      opacity: 0.5;
    }

    .footer-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 16px;
    }

    .footer-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr 1fr;
      gap: 48px;
      padding-bottom: 48px;
      border-bottom: 1px solid var(--border-color);
    }

    /* Footer Brand Column */
    .footer-brand {
      max-width: 380px;
    }

    .footer-logo {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 20px;
    }

    .footer-logo-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(0, 175, 240, 0.3);
    }

    .footer-logo-icon svg {
      width: 28px;
      height: 28px;
    }

    .footer-logo-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .footer-logo-main {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      line-height: 1.2;
    }

    .footer-logo-sub {
      font-size: 13px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .footer-description {
      color: var(--text-secondary);
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 24px;
    }

    /* Social Links */
    .footer-social {
      display: flex;
      gap: 12px;
    }

    .social-link {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
      font-size: 18px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none;
    }

    .social-link:hover {
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      border-color: transparent;
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 175, 240, 0.35);
    }

    /* Footer Columns */
    .footer-column h3.footer-heading {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-primary);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 20px;
      position: relative;
      padding-bottom: 12px;
    }

    .footer-column h3.footer-heading::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 32px;
      height: 2px;
      background: linear-gradient(90deg, #00AFF0, #0099D6);
      border-radius: 2px;
    }

    .footer-links {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .footer-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      transition: all 0.2s ease;
      position: relative;
      padding-left: 0;
    }

    .footer-links a::before {
      content: '';
      position: absolute;
      left: 0;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, #00AFF0, #0099D6);
      bottom: -2px;
      transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .footer-links a:hover {
      color: #00AFF0;
      padding-left: 8px;
    }

    .footer-links a:hover::before {
      width: 24px;
    }

    /* Footer Bottom */
    .footer-bottom {
      padding: 32px 0;
    }

    .footer-bottom-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 16px;
    }

    .footer-copyright {
      color: var(--text-secondary);
      font-size: 14px;
      margin: 0;
      font-weight: 500;
    }

    .footer-stats {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .stat-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      color: var(--text-secondary);
      font-size: 13px;
      font-weight: 600;
      white-space: nowrap;
    }

    .stat-badge i {
      color: #00AFF0;
      font-size: 12px;
    }

    .footer-disclaimer {
      color: var(--text-muted);
      font-size: 12px;
      text-align: center;
      margin: 0;
      line-height: 1.5;
      max-width: 900px;
      margin: 0 auto;
    }

    /* ============================================
       RESPONSIVE DESIGN
       ============================================ */
    
    /* Tablet */
    @media (max-width: 992px) {
      .footer-grid {
        grid-template-columns: 2fr 1fr 1fr;
        gap: 40px;
      }

      .footer-brand {
        grid-column: 1 / -1;
        max-width: 100%;
      }
    }

    /* Mobile */
    @media (max-width: 768px) {
      .modern-footer {
        margin-top: 60px;
        padding: 40px 0 0;
      }

      .footer-grid {
        grid-template-columns: 1fr;
        gap: 36px;
        padding-bottom: 36px;
      }

      .footer-brand {
        text-align: center;
      }

      .footer-logo {
        justify-content: center;
      }

      .footer-description {
        text-align: center;
      }

      .footer-social {
        justify-content: center;
      }

      .footer-column h3.footer-heading {
        text-align: center;
      }

      .footer-column h3.footer-heading::after {
        left: 50%;
        transform: translateX(-50%);
      }

      .footer-links {
        text-align: center;
      }

      .footer-links a::before {
        display: none;
      }

      .footer-links a:hover {
        padding-left: 0;
      }

      .footer-bottom-content {
        flex-direction: column;
        text-align: center;
      }

      .footer-stats {
        justify-content: center;
      }
    }

    /* Small Mobile */
    @media (max-width: 480px) {
      .footer-logo-icon {
        width: 40px;
        height: 40px;
      }

      .footer-logo-icon svg {
        width: 24px;
        height: 24px;
      }

      .footer-logo-main {
        font-size: 16px;
      }

      .footer-logo-sub {
        font-size: 12px;
      }

      .social-link {
        width: 36px;
        height: 36px;
        font-size: 16px;
      }

      .footer-stats {
        flex-direction: column;
        width: 100%;
      }

      .stat-badge {
        justify-content: center;
        width: 100%;
      }
    }

    /* Dark mode adjustments */
    [data-theme="dark"] .footer-logo-icon {
      box-shadow: 0 4px 12px rgba(0, 175, 240, 0.4);
    }

    [data-theme="dark"] .social-link {
      background: var(--bg-primary);
    }

    [data-theme="dark"] .stat-badge {
      background: var(--bg-primary);
    }

    [data-theme="dark"] .modern-footer::before {
      opacity: 0.7;
    }
  </style>
  <!-- Anchor target for sticky nav: Wishlist -->
  <section id="wishlist" aria-label="Wishlist" style="position: relative; top: -1px;"></section>

  <nav class="sticky-bottom-nav" role="navigation" aria-label="Bottom navigation">
    <a href="#headerSearch" class="nav-item" data-nav="search">
      <span class="icon"><i class="fa-solid fa-magnifying-glass"></i></span>
      <span class="label">Search</span>
    </a>
    <a href="/near-me/" class="nav-item" data-nav="near">
      <span class="icon"><i class="fa-solid fa-location-arrow"></i></span>
      <span class="label">Near Me</span>
    </a>
    <a href="/?sort=best" class="nav-item" data-nav="best">
      <span class="icon"><i class="fa-solid fa-trophy"></i></span>
      <span class="label">Best</span>
    </a>
    <a href="/?sort=hot" class="nav-item" data-nav="hot">
      <span class="icon"><i class="fa-solid fa-fire"></i></span>
      <span class="label">Hot!</span>
    </a>
    <a href="/wishlist/" class="nav-item" data-nav="wishlist">
      <span class="icon position-relative"><i class="fa-solid fa-heart"></i><span class="wishlist-count" style="display:none;position:absolute;top:-6px;right:-6px;background:#ff3b30;color:#fff;font-size:10px;font-weight:700;border-radius:10px;min-width:18px;height:18px;align-items:center;justify-content:center;padding:0 5px;border:2px solid var(--bg-secondary);box-shadow:0 2px 8px rgba(255,59,48,0.4)">0</span></span>
      <span class="label">Wishlist</span>
    </a>
  </nav>
  <style>
    .sticky-bottom-nav{position:fixed;left:0;right:0;bottom:calc(0px + env(safe-area-inset-bottom));z-index:9999;display:flex;align-items:center;justify-content:space-between;padding:8px 16px;background:var(--bg-secondary);border-top:1px solid var(--border-color);border-left:0;border-right:0;border-bottom:0;border-radius:0;box-shadow:0 -4px 12px rgba(0,0,0,0.06)}
    .sticky-bottom-nav .nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;color:var(--text-primary);text-decoration:none}
    .sticky-bottom-nav .icon{width:32px;height:32px;border-radius:10px;background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,175,240,0.35);color:#fff;position:relative;transition:box-shadow .35s ease, transform .3s ease}
    .sticky-bottom-nav .nav-item:hover .icon{transform:translateY(-2px);box-shadow:0 6px 18px rgba(0,175,240,0.55)}
    .sticky-bottom-nav .nav-item.active .icon{background:linear-gradient(135deg,#0099D6 0%,#0088C0 100%);box-shadow:0 6px 16px rgba(0,175,240,0.55)}
    .sticky-bottom-nav .nav-item.active .icon::after{content:"";position:absolute;inset:0;border-radius:inherit;box-shadow:0 0 0 0 rgba(0,175,240,.55);animation:pulseGlow 3.2s ease-in-out infinite;pointer-events:none}
    @keyframes pulseGlow{0%,65%{box-shadow:0 0 0 0 rgba(0,175,240,.55)}80%{box-shadow:0 0 0 10px rgba(0,175,240,0)}100%{box-shadow:0 0 0 0 rgba(0,175,240,0)}}
    .sticky-bottom-nav .icon i{font-size:15px}
    .sticky-bottom-nav .label{font-size:11px;font-weight:700;color:var(--text-primary)}
  </style>
  <script>
    (function(){try{
      var p=location.pathname;
      document.querySelectorAll('.sticky-bottom-nav .nav-item').forEach(function(a){
        var k=a.getAttribute('data-nav');
        if((k==='search'&&(p==='/'||p==='/index.html'))||(k==='categories'&&p.startsWith('/categories'))){a.classList.add('active');}
      });
      var searchLink=document.querySelector('.sticky-bottom-nav .nav-item[data-nav="search"]');
      if(searchLink){
        searchLink.addEventListener('click',function(ev){
          ev.preventDefault();
          try{
            var isMobile=window.matchMedia('(max-width: 768px)').matches;
            var headerInput=document.getElementById('headerSearch')||document.querySelector('.header-search-input');
            var headerVisible=headerInput && headerInput.offsetParent!==null;
            if(isMobile && !headerVisible){
              var mobileTrigger=document.getElementById('mobileSearchTrigger');
              if(mobileTrigger){mobileTrigger.click();return;}
            }
            window.scrollTo({top:0,behavior:'smooth'});
            if(headerInput && headerVisible){
              setTimeout(function(){headerInput.focus({preventScroll:true});},220);
            }else if(!isMobile){
              location.href='/';
            }
          }catch(err){location.href='/';}
        });
      }
    }catch(e){}})();
  </script>
  <script src="/utils/wishlist-badge.js?v=20251116-1"></script>
  <script type="module">
    import { inject } from '@vercel/analytics';
    inject();
  </script>
</body>
</html>
