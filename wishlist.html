<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Wishlist | FansPedia</title>
  <meta name="description" content="Your saved OnlyFans creators. Browse and manage your wishlist of favorite models and accounts." />
  <link rel="canonical" href="https://fanspedia.net/wishlist/" />
  <link rel="icon" type="image/svg+xml" sizes="any" href="/favicon.svg">

  <!-- Preconnects -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preconnect" href="https://images.weserv.nl" crossorigin>

  <!-- Bootstrap + Font Awesome -->
  <link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"></noscript>
  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>

  <style>
    /* Same CSS variables and styles as homepage */
    :root {
      --bg-primary: #f5f5f7;
      --bg-secondary: #ffffff;
      --text-primary: #1d1d1f;
      --text-secondary: #666;
      --text-muted: #888;
      --border-color: #e0e0e0;
      --card-shadow: rgba(0, 0, 0, 0.08);
      --card-shadow-hover: rgba(0, 0, 0, 0.12);
      --input-bg: #ffffff;
      --brand-color: #0099D6;
      --card-bg: #ffffff;
    }

    [data-theme="dark"] {
      --bg-primary: #1a1a1a;
      --bg-secondary: #2a2a2a;
      --text-primary: #e8e8e8;
      --text-secondary: #b8b8b8;
      --text-muted: #888;
      --border-color: #404040;
      --card-shadow: rgba(0, 0, 0, 0.3);
      --card-shadow-hover: rgba(0, 0, 0, 0.5);
      --input-bg: #2a2a2a;
      --brand-color: #00AFF0;
      --card-bg: #2a2a2a;
    }

    body { 
      background-color: var(--bg-primary); 
      color: var(--text-primary); 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; 
      padding-top: 68px;
      padding-bottom: 80px;
      transition: background-color 0.3s ease, color 0.3s ease; 
    }

    /* Header styles (copy from homepage) */
    .superior-header { position: fixed; top: 0; left: 0; right: 0; z-index: 9999; background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%); box-shadow: 0 4px 24px rgba(0, 175, 240, 0.25); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .header-main { padding: 10px 0; }
    .header-container { max-width: 1400px; margin: 0 auto; padding: 0 16px; display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    .logo-section { display: flex; align-items: center; gap: 12px; flex-shrink: 0; text-decoration: none; }
    .header-search-section { flex: 1; max-width: 560px; position: relative; }
    .header-search-wrapper { position: relative; display: flex; align-items: center; }
    .header-search-input { width: 100%; padding: 10px 16px 10px 44px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50px; background: rgba(255,255,255,0.95); font-size: 15px; font-weight: 500; color: #1d1d1f; transition: all 0.3s ease; box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
    .header-search-input:focus { outline: none; border-color: #fff; background: #fff; box-shadow: 0 8px 32px rgba(0,0,0,0.15); transform: translateY(-1px); }
    .header-search-icon { position: absolute; left: 16px; color: #00AFF0; font-size: 18px; pointer-events: none; }
    .header-actions { display: flex; align-items: center; gap: 12px; flex-shrink: 0; }
    .theme-toggle, .safe-search-toggle { width: 44px; height: 44px; border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.3); background: rgba(255, 255, 255, 0.2); color: white; font-size: 20px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
    .theme-toggle:hover, .safe-search-toggle:hover { background: rgba(255, 255, 255, 0.3); transform: translateY(-1px); }
    .mobile-menu-toggle, .mobile-search-trigger { display: none; background: rgba(255, 255, 255, 0.2); border: 1px solid rgba(255, 255, 255, 0.3); color: white; width: 44px; height: 44px; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; justify-content: center; align-items: center; }

    /* Desktop nav */
    .desktop-nav { position: relative; flex-shrink: 0; }
    .desktop-nav .nav-btn { display:inline-flex; align-items:center; gap:8px; background:rgba(255,255,255,0.2); color:#fff; border:1px solid rgba(255,255,255,0.35); border-radius:9999px; padding:10px 14px; font-weight:800; font-size:14px; cursor:pointer; transition:all .2s ease; }
    .desktop-nav .nav-btn:hover { background: rgba(255,255,255,0.3); }
    .desktop-nav .nav-btn i { font-size:12px; opacity:0.9; }
    .desktop-nav .dropdown-menu { position:absolute; right:0; top:calc(100% + 8px); background:#fff; border-radius:12px; box-shadow:0 12px 32px rgba(0,0,0,0.15); padding:8px; min-width:240px; display:none; z-index:10000; }
    .desktop-nav .dropdown-menu.open { display:block; }
    .desktop-nav .dropdown-menu a { display:block; padding:10px 12px; color:#1d1d1f; font-weight:700; border-radius:8px; text-decoration:none; transition:background .15s ease, color .15s ease; }
    .desktop-nav .dropdown-menu a:hover { background:#f5f5f7; color:#00AFF0; }
    .desktop-nav .dropdown-menu .divider { height:1px; background:#eee; margin:6px 6px; }
    .desktop-nav .dropdown-menu a.view-all { color:#00AFF0; }

    /* Mobile drawer + overlay */
    .drawer-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:10000; opacity:0; pointer-events:none; transition:opacity .3s ease; }
    .drawer-overlay.open { opacity:1; pointer-events:auto; }
    .mobile-drawer { position:fixed; top:0; right:-100%; width:82%; max-width:340px; height:100%; background:#fff; box-shadow:-8px 0 24px rgba(0,0,0,0.2); z-index:10001; padding:16px; display:flex; flex-direction:column; gap:6px; transition:right .3s ease; }
    .mobile-drawer.open { right:0; }
    .mobile-drawer .drawer-close { align-self:flex-end; background:none; border:none; font-size:28px; line-height:1; color:#1d1d1f; margin-bottom:4px; cursor:pointer; }
    .mobile-drawer > a { display:block; padding:14px 12px; border-radius:8px; color:#1d1d1f; font-weight:700; text-decoration:none; margin:2px 0; font-size:16px; }
    .mobile-drawer > a:hover { background:#f5f5f7; color:#00AFF0; }
    .drawer-categories-toggle { display:flex; align-items:center; justify-content:space-between; padding:14px 12px; cursor:pointer; border-radius:8px; margin:2px 0; transition:background .2s ease; font-size:16px; font-weight:700; color:#1d1d1f; }
    .drawer-categories-toggle:hover { background:#f5f5f7; }
    .drawer-categories-toggle .icon-text { display:flex; align-items:center; gap:10px; }
    .drawer-categories-toggle .icon-text i { font-size:18px; color:#1d1d1f; }
    .drawer-categories-toggle .chevron { font-size:14px; transition:transform .3s ease; color:#666; }
    .drawer-categories-toggle.open .chevron { transform:rotate(180deg); }
    #drawerCategoriesSection { max-height:0; overflow:hidden; transition:max-height .3s ease, opacity .3s ease; opacity:0; }
    #drawerCategoriesSection.open { max-height:800px; opacity:1; overflow-y:auto; }
    .drawer-categories-label { color:#999; font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; padding:12px 16px 8px; margin:0; }
    #drawerCategories { display:flex; flex-direction:column; gap:0; padding:0 4px; max-height:400px; overflow-y:auto; }
    #drawerCategories::-webkit-scrollbar { width:4px; }
    #drawerCategories::-webkit-scrollbar-thumb { background:#ddd; border-radius:4px; }
    #drawerCategories a { display:block; padding:12px 12px; color:#555; font-weight:600; text-decoration:none; border-radius:6px; margin:1px 0; font-size:15px; transition:background .15s ease, color .15s ease; }
    #drawerCategories a:hover { background:#f5f5f7; color:#00AFF0; }
    .drawer-view-all-btn { display:block; margin:12px 8px 8px; padding:14px 20px; background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%); color:white; text-align:center; border-radius:12px; font-weight:800; text-decoration:none; font-size:15px; box-shadow:0 4px 12px rgba(0,175,240,0.3); transition:transform .2s ease, box-shadow .2s ease; }
    .drawer-view-all-btn:hover { transform:translateY(-1px); box-shadow:0 6px 16px rgba(0,175,240,0.4); color:white; }

    /* Safe Search styles */
    body.safe-search-active .card img { filter:blur(20px) saturate(.7); opacity:.85; }
    body.safe-search-active .card:hover img { filter:blur(8px) saturate(.85); opacity:.95; }
    body.safe-search-active .card::before { content:'18+'; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); background:rgba(0,0,0,.75); color:white; padding:12px 24px; border-radius:12px; font-weight:800; font-size:24px; letter-spacing:2px; pointer-events:none; z-index:5; backdrop-filter:blur(10px); border:2px solid rgba(255,255,255,0.3); }
    .safe-search-modal { position:fixed; inset:0; background:rgba(0,0,0,0.75); backdrop-filter:blur(10px); z-index:10002; display:none; align-items:center; justify-content:center; padding:20px; animation:fadeIn .3s ease; }
    .safe-search-modal.show { display:flex; }
    @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
    .safe-search-modal-content { background:var(--bg-secondary); border-radius:24px; padding:40px; max-width:520px; width:100%; box-shadow:0 20px 60px rgba(0,0,0,0.3); animation:slideUp .3s cubic-bezier(.4,0,.2,1); position:relative; }
    @keyframes slideUp { from { transform:translateY(40px); opacity:0; } to { transform:translateY(0); opacity:1; } }
    .safe-search-modal-icon { width:80px; height:80px; background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%); border-radius:20px; display:flex; align-items:center; justify-content:center; margin:0 auto 24px; font-size:36px; color:white; box-shadow:0 8px 24px rgba(0,175,240,0.4); }
    .safe-search-modal h2 { font-size:28px; font-weight:800; color:var(--text-primary); margin-bottom:12px; text-align:center; }
    .safe-search-modal p { color:var(--text-secondary); font-size:16px; line-height:1.6; text-align:center; margin-bottom:32px; }
    .safe-search-modal-actions { display:flex; gap:12px; flex-direction:column; }
    .safe-search-modal-btn { padding:16px 32px; border-radius:12px; font-weight:700; font-size:16px; cursor:pointer; transition:all .3s ease; border:none; text-align:center; }
    .safe-search-modal-btn-primary { background:linear-gradient(135deg,#34c759 0%,#30b350 100%); color:white; box-shadow:0 6px 18px rgba(52,199,89,0.4); }
    .safe-search-modal-btn-primary:hover { transform:translateY(-2px); box-shadow:0 8px 24px rgba(52,199,89,0.5); }
    .safe-search-modal-btn-secondary { background:var(--bg-primary); color:var(--text-primary); border:2px solid var(--border-color); }
    .safe-search-modal-btn-secondary:hover { background:var(--bg-secondary); border-color:var(--text-secondary); }
    .safe-search-modal-footer { margin-top:24px; text-align:center; font-size:13px; color:var(--text-muted); }
    @media (max-width:576px){ .safe-search-modal-content{ padding:32px 24px; } .safe-search-modal h2{ font-size:24px; } .safe-search-modal p{ font-size:15px; } }

    @media (max-width: 768px) {
      body { padding-top: 66px; }
      .header-search-section { display: none !important; }
      .mobile-search-trigger { display: inline-flex; }
      .desktop-nav { display: none; }
      .mobile-menu-toggle { display: inline-flex; }
    }

    /* Wishlist content */
    .wishlist-hero { text-align: center; padding: 40px 20px 20px; max-width: 900px; margin: 0 auto; }
    .wishlist-hero h1 { color: #00aff0; font-weight: 800; letter-spacing: -0.4px; margin-bottom: 12px; font-size: 36px; }
    .wishlist-hero p { color: var(--text-secondary); font-size: 16px; margin-bottom: 0; }

    .container-fluid { max-width: 1400px; padding: 20px; }

    /* Card styles (same as homepage) */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 16px;
      overflow: hidden;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 4px 12px var(--card-shadow);
      position: relative;
    }
    .card:hover { transform: translateY(-4px); box-shadow: 0 12px 24px var(--card-shadow-hover); }
    .card img { width: 100%; height: 420px; object-fit: cover; background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%); }
    .card img { height: 360px; }
    .card-body { padding: 20px; }
    .card h5 { font-size:20px; font-weight:700; margin-bottom:4px; color: var(--text-primary); }
    .username { color: var(--text-secondary); font-size:14px; margin-bottom:8px; }
    .view-profile-btn { background: linear-gradient(135deg,#00AFF0 0%,#0099D6 100%); color:white; border:none; padding:14px 28px; border-radius:12px; font-weight:800; font-size:16px; cursor:pointer; transition:all .25s ease; text-decoration:none; display:block; width:100%; text-align:center; margin-top:16px; box-shadow:0 6px 18px rgba(0,175,240,0.35); }
    .view-profile-btn:hover { background:linear-gradient(135deg,#0099D6 0%,#0088C0 100%); transform:translateY(-1px); box-shadow:0 8px 22px rgba(0,175,240,0.45); color:#fff; }
    .card-title { font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
    .verified-badge { color: #1DA1F2; font-size: 16px; }
    .card-text { font-size: 13px; color: var(--text-secondary); line-height: 1.5; margin-bottom: 12px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .card-footer { display: flex; justify-content: space-between; align-items: center; padding: 0; border-top: none; background: transparent; }
    .btn-primary { background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%); border: none; color: #fff; font-weight: 700; padding: 10px 20px; border-radius: 10px; transition: all 0.2s ease; box-shadow: 0 4px 12px rgba(0, 175, 240, 0.3); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0, 175, 240, 0.4); }

    .favorite-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: white;
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: all 0.2s ease;
      z-index: 10;
      font-size: 20px;
    }
    .favorite-btn span { color: #ccc; }
    .favorite-btn:hover {
      transform: scale(1.1);
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      box-shadow: 0 6px 16px rgba(0,175,240,0.35);
    }
    .favorite-btn:hover span { color: #fff !important; }
    .favorite-btn.active {
      background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%);
      box-shadow: 0 6px 16px rgba(0,175,240,0.35);
      transform: none;
    }
    .favorite-btn.active span { color: #fff !important; }
    .price-tag { color:#34c759; font-weight:700; font-size:18px; }
    .price-free { color:#34c759; font-weight:700; font-size:16px; text-transform:uppercase; }

    .empty-state { text-align: center; padding: 60px 20px; max-width: 500px; margin: 0 auto; }
    .empty-state i { font-size: 64px; color: var(--brand-color); margin-bottom: 20px; opacity: 0.5; }
    .empty-state h2 { color: var(--text-primary); font-weight: 700; margin-bottom: 12px; }
    .empty-state p { color: var(--text-secondary); margin-bottom: 24px; }
    .empty-state .btn { background: linear-gradient(135deg, #00AFF0 0%, #0099D6 100%); color: white; padding: 12px 32px; border-radius: 50px; text-decoration: none; font-weight: 700; display: inline-block; transition: all 0.2s ease; }
    .empty-state .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0, 175, 240, 0.4); }

    /* Sticky bottom nav */
    .sticky-bottom-nav{position:fixed;left:0;right:0;bottom:calc(0px + env(safe-area-inset-bottom));z-index:9999;display:flex;align-items:center;justify-content:space-between;padding:8px 16px;background:var(--bg-secondary);border-top:1px solid var(--border-color);box-shadow:0 -4px 12px rgba(0,0,0,0.06)}
    .sticky-bottom-nav .nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;color:var(--text-primary);text-decoration:none}
    .sticky-bottom-nav .icon{width:32px;height:32px;border-radius:10px;background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(0,175,240,0.35);color:#fff}
    .sticky-bottom-nav .icon i{font-size:15px}
    .sticky-bottom-nav .label{font-size:11px;font-weight:700;color:var(--text-primary)}
    .sticky-bottom-nav .nav-item.active .icon{background:linear-gradient(135deg,#0099D6 0%,#0088C0 100%);box-shadow:0 6px 16px rgba(0,175,240,0.5)}
    /* ===== Added for full header parity with homepage ===== */
    .superior-header.scrolled { box-shadow: 0 8px 32px rgba(0,175,240,0.35); }
    .header-main { backdrop-filter: blur(10px); }
    .logo-icon { width:40px; height:40px; background:#fff; border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:20px; box-shadow:0 4px 12px rgba(0,0,0,0.15); transition:transform .3s ease; }
    .logo-icon:hover { transform:scale(1.05) rotate(5deg); }
    .logo-icon i { color:#00AFF0; }
    .logo-text { display:flex; flex-direction:column; }
    .logo-text .brand { font-size:22px; font-weight:900; color:#fff; letter-spacing:.3px; line-height:1; text-shadow:0 2px 4px rgba(0,0,0,0.3),0 1px 2px rgba(0,0,0,0.2); filter:brightness(1.05); }
    .logo-text .tagline { font-size:11px; color:rgba(255,255,255,0.95); font-weight:600; letter-spacing:.8px; margin-top:2px; text-shadow:0 1px 3px rgba(0,0,0,0.2); }
    /* Override action button styles to match homepage (circular) */
    .theme-toggle { background:rgba(255,255,255,0.2); border:1px solid rgba(255,255,255,0.3); color:#fff; width:44px; height:44px; border-radius:50%; cursor:pointer; transition:all .3s ease; display:inline-flex; align-items:center; justify-content:center; font-size:18px; }
    .theme-toggle:hover { background:rgba(255,255,255,0.3); transform:scale(1.05); }
    .theme-toggle:active { transform:scale(0.95); }
    .safe-search-toggle { background:rgba(255,255,255,0.2); border:1px solid rgba(255,255,255,0.3); color:#fff; width:44px; height:44px; border-radius:50%; cursor:pointer; transition:all .3s ease; display:inline-flex; align-items:center; justify-content:center; font-size:18px; position:relative; }
    .safe-search-toggle:hover { background:rgba(255,255,255,0.3); transform:scale(1.05); }
    .safe-search-toggle:active { transform:scale(0.95); }
    .safe-search-toggle.active { background:rgba(52,199,89,0.9); border-color:rgba(52,199,89,1); box-shadow:0 0 20px rgba(52,199,89,0.4); }
    .safe-search-toggle.active:hover { background:rgba(52,199,89,1); }
    .safe-search-toggle.active::after { content:''; position:absolute; top:2px; right:2px; width:10px; height:10px; background:#34c759; border:2px solid #fff; border-radius:50%; box-shadow:0 2px 8px rgba(52,199,89,0.6); }
    /* Mobile search modal (parity) */
    .mobile-search-modal { position:fixed; inset:0; background:#fff; z-index:10003; display:none; flex-direction:column; }
    .mobile-search-modal.active { display:flex; }
    .mobile-search-header { display:flex; align-items:center; gap:12px; padding:16px; background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%); box-shadow:0 4px 12px rgba(0,175,240,0.3); }
    .mobile-search-back { background:none; border:none; color:#fff; font-size:24px; cursor:pointer; padding:8px; display:flex; align-items:center; justify-content:center; }
    .mobile-search-input-wrapper { flex:1; position:relative; }
    .mobile-search-input { width:100%; padding:12px 16px 12px 44px; border:2px solid rgba(255,255,255,0.3); border-radius:50px; background:rgba(255,255,255,0.95); font-size:16px; font-weight:500; color:#1d1d1f; }
    .mobile-search-input:focus { outline:none; border-color:#fff; background:#fff; }
    .mobile-search-icon { position:absolute; left:16px; top:50%; transform:translateY(-50%); color:#00AFF0; font-size:18px; pointer-events:none; }
    .mobile-search-content { flex:1; overflow-y:auto; padding:20px 16px; }
    .mobile-search-label { color:#999; font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.8px; margin-bottom:12px; }
    .mobile-search-suggestions { display:flex; flex-direction:column; gap:4px; }
    .mobile-search-suggestion { display:flex; align-items:center; gap:12px; padding:14px 16px; background:#f5f5f7; border-radius:12px; text-decoration:none; color:#1d1d1f; font-weight:600; font-size:15px; transition:all .2s ease; }
    .mobile-search-suggestion:hover, .mobile-search-suggestion:active { background:#e8e8ea; transform:translateX(4px); }
    .mobile-search-suggestion i { color:#00AFF0; font-size:16px; }

    /* Clear All Button */
    .clear-all-btn { position:absolute; top:20px; right:20px; background:#dc3545; color:#fff; border:none; border-radius:8px; padding:10px 20px; font-weight:700; font-size:14px; cursor:pointer; transition:all .2s ease; display:none; align-items:center; gap:8px; box-shadow:0 2px 8px rgba(220,53,69,0.3); }
    .clear-all-btn.show { display:flex; }
    .clear-all-btn:hover { background:#c82333; transform:translateY(-2px); box-shadow:0 4px 12px rgba(220,53,69,0.4); }
    .clear-all-btn i { font-size:14px; }
    @media(max-width:768px){ .clear-all-btn { position:static; margin:0 auto 16px; } .wishlist-hero { text-align:center; } }

    /* Clear All Modal */
    .clear-modal-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:10002; display:none; align-items:center; justify-content:center; }
    .clear-modal-overlay.show { display:flex; }
    .clear-modal { background:var(--bg-secondary); border-radius:16px; padding:32px; max-width:480px; width:90%; box-shadow:0 12px 48px rgba(0,0,0,0.2); animation:modalSlideIn .3s ease; }
    @keyframes modalSlideIn { from { opacity:0; transform:translateY(-20px); } to { opacity:1; transform:translateY(0); } }
    .clear-modal h3 { color:var(--text-primary); font-weight:800; font-size:22px; margin:0 0 16px; }
    .clear-modal p { color:var(--text-secondary); font-size:15px; line-height:1.6; margin:0 0 24px; }
    .clear-modal-actions { display:flex; gap:12px; }
    .clear-modal-btn { flex:1; padding:12px 24px; border:none; border-radius:8px; font-weight:700; font-size:14px; cursor:pointer; transition:all .2s ease; }
    .clear-modal-btn-cancel { background:var(--border-color); color:var(--text-primary); }
    .clear-modal-btn-cancel:hover { background:#c8c8c8; }
    .clear-modal-btn-confirm { background:#dc3545; color:#fff; }
    .clear-modal-btn-confirm:hover { background:#c82333; transform:translateY(-1px); box-shadow:0 4px 12px rgba(220,53,69,0.4); }
  </style>
</head>
<body>
  <!-- SUPERIOR STICKY HEADER (Exact copy from homepage) -->
  <header class="superior-header" id="mainHeader">
    <div class="header-main">
      <div class="header-container">
        <!-- Logo -->
        <a href="/" class="logo-section">
          <div class="logo-icon">
            <i class="fas fa-fire"></i>
          </div>
          <div class="logo-text">
            <div class="brand">FansPedia</div>
            <div class="tagline">10k+ TOP Creators</div>
          </div>
        </a>
        <!-- Desktop categories dropdown trigger -->
        <div class="desktop-nav">
          <button id="categoriesToggle" class="nav-btn" aria-haspopup="true" aria-expanded="false">
            Categories <i class="fas fa-chevron-down" aria-hidden="true"></i>
          </button>
          <div id="categoriesMenu" class="dropdown-menu" role="menu" aria-hidden="true"></div>
        </div>
        <!-- Search -->
        <div class="header-search-section">
          <div class="header-search-wrapper">
            <i class="fas fa-search header-search-icon"></i>
            <input
              type="text"
              class="header-search-input"
              placeholder="Search by name, location, category..."
              id="headerSearch"
              autocomplete="off"
              autocapitalize="none"
              spellcheck="false"
            >
          </div>
        </div>
        <!-- Header action buttons -->
        <div class="header-actions">
          <button class="mobile-search-trigger" id="mobileSearchTrigger" aria-label="Search">
            <i class="fas fa-search"></i>
          </button>
          <button class="safe-search-toggle" id="safeSearchToggle" aria-label="Toggle Safe Search (blur images)" title="Safe Search: Browse comfortably in public">
            <i class="fas fa-eye-slash"></i>
          </button>
          <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
            <i class="fas fa-moon"></i>
          </button>
          <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Menu">
            <i class="fas fa-bars"></i>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Mobile Search Modal -->
  <div class="mobile-search-modal" id="mobileSearchModal">
    <div class="mobile-search-header">
      <button class="mobile-search-back" id="mobileSearchBack" aria-label="Close search">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="mobile-search-input-wrapper">
        <i class="fas fa-search mobile-search-icon"></i>
        <input type="text" class="mobile-search-input" id="mobileSearchInput" placeholder="Search by name, location, category..." autocomplete="off" autocapitalize="none" spellcheck="false">
      </div>
    </div>
    <div class="mobile-search-content">
      <div class="mobile-search-label">POPULAR SEARCHES</div>
      <div class="mobile-search-suggestions" id="mobileSearchSuggestions"></div>
    </div>
  </div>

  <!-- Safe Search Modal -->
  <div id="safeSearchModal" class="safe-search-modal" role="dialog" aria-labelledby="safeSearchModalTitle" aria-modal="true">
    <div class="safe-search-modal-content">
      <div class="safe-search-modal-icon">
        <i class="fas fa-shield-alt"></i>
      </div>
      <h2 id="safeSearchModalTitle">Browse Safely in Public?</h2>
      <p>Enable <strong>Safe Search</strong> to blur images so you can comfortably browse at work, on the bus, or anywhere public. You can toggle this anytime using the shield icon in the header.</p>
      <div class="safe-search-modal-actions">
        <button class="safe-search-modal-btn safe-search-modal-btn-primary" id="enableSafeSearch">
          <i class="fas fa-shield-alt"></i> Enable Safe Search
        </button>
        <button class="safe-search-modal-btn safe-search-modal-btn-secondary" id="dismissSafeSearch">No Thanks, I'm in Private</button>
      </div>
      <div class="safe-search-modal-footer">You can change this anytime via the <i class="fas fa-eye-slash"></i> icon.</div>
    </div>
  </div>

  <!-- Mobile Drawer -->
  <div id="drawerOverlay" class="drawer-overlay" tabindex="-1" aria-hidden="true"></div>
  <nav id="mobileDrawer" class="mobile-drawer" aria-hidden="true" aria-labelledby="mobileMenuToggle">
    <button class="drawer-close" id="drawerClose" aria-label="Close menu">×</button>
    <a href="/">Home</a>
    <div class="drawer-categories-toggle" id="drawerCategoriesToggle">
      <div class="icon-text">
        <i class="fas fa-th"></i>
        <span>Categories</span>
      </div>
      <i class="fas fa-chevron-down chevron"></i>
    </div>
    <div id="drawerCategoriesSection">
      <div class="drawer-categories-label">MOST POPULAR CATEGORIES</div>
      <div id="drawerCategories"></div>
      <a href="/categories/" class="drawer-view-all-btn">View All Categories</a>
    </div>
  </nav>

  <!-- Wishlist hero -->
  <div class="wishlist-hero" style="position:relative;">
    <h1><i class="fas fa-heart"></i> My Wishlist</h1>
    <p>Your saved OnlyFans creators. Click the heart to remove from wishlist.</p>
    <button id="clearAllBtn" class="clear-all-btn">
      <i class="fas fa-trash-alt"></i> Clear All
    </button>
  </div>

  <!-- Clear All Confirmation Modal -->
  <div id="clearAllModal" class="clear-modal-overlay">
    <div class="clear-modal">
      <h3>Clear all creators from your wishlist?</h3>
      <p>All <strong id="modalCreatorCount">0</strong> creators in your wishlist will be permanently removed. This action is irreversible.</p>
      <div class="clear-modal-actions">
        <button class="clear-modal-btn clear-modal-btn-cancel" id="cancelClearAll">Cancel</button>
        <button class="clear-modal-btn clear-modal-btn-confirm" id="confirmClearAll">Clear All</button>
      </div>
    </div>
  </div>

  <!-- Wishlist results -->
  <div class="container-fluid">
    <div id="wishlistResults" class="row g-3 justify-content-center"></div>
    <div id="emptyState" class="empty-state" style="display: none;">
      <i class="far fa-heart"></i>
      <h2>Your wishlist is empty</h2>
      <p>Start adding your favorite creators by clicking the heart icon on their profile cards.</p>
      <a href="/" class="btn">Browse Creators</a>
    </div>
  </div>

  <!-- Footer replicated from homepage -->
  <footer class="modern-footer">
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-column footer-brand">
          <div class="footer-logo">
            <div class="footer-logo-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor" opacity="0.8"/>
                <path d="M2 17L12 22L22 17V12L12 17L2 12V17Z" fill="currentColor"/>
              </svg>
            </div>
            <div class="footer-logo-text">
              <span class="footer-logo-main">FansPedia</span>
              <span class="footer-logo-sub">Your Premium Creator Directory</span>
            </div>
          </div>
          <p class="footer-description">Discover and connect with verified OnlyFans creators. Updated daily with 9,500+ profiles across all categories.</p>
          <div class="footer-social">
            <a href="https://twitter.com" target="_blank" rel="noopener" class="social-link" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="https://facebook.com" target="_blank" rel="noopener" class="social-link" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="https://instagram.com" target="_blank" rel="noopener" class="social-link" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="https://youtube.com" target="_blank" rel="noopener" class="social-link" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        <div class="footer-column">
          <h3 class="footer-heading">Popular Categories</h3>
          <ul class="footer-links">
            <li><a href="/categories/verified">Verified Creators</a></li>
            <li><a href="/categories/free">Free OnlyFans</a></li>
            <li><a href="/categories/cosplay">Cosplay Models</a></li>
            <li><a href="/categories/fitness">Fitness & Wellness</a></li>
            <li><a href="/categories/gaming">Gaming Creators</a></li>
            <li><a href="/categories">View All Categories</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3 class="footer-heading">Resources</h3>
          <ul class="footer-links">
            <li><a href="#" onclick="alert('Coming soon!');return false;">Creator Guide</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">How to Subscribe</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">Safety Tips</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">FAQ</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">Blog</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">Support</a></li>
          </ul>
        </div>
        <div class="footer-column">
          <h3 class="footer-heading">Legal & Info</h3>
          <ul class="footer-links">
            <li><a href="#" onclick="alert('Coming soon!');return false;">About Us</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">Contact</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">Terms of Service</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">Privacy Policy</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">DMCA Policy</a></li>
            <li><a href="#" onclick="alert('Coming soon!');return false;">Cookie Policy</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <p class="footer-copyright">© 2025 fanspedia.net - All rights reserved</p>
          <div class="footer-stats">
            <span class="stat-badge"><i class="fas fa-check-circle"></i> 9,500+ Verified Creators</span>
            <span class="stat-badge"><i class="fas fa-sync-alt"></i> Updated Daily</span>
          </div>
        </div>
        <p class="footer-disclaimer">This website is an independent directory and is not affiliated with OnlyFans. All trademarks belong to their respective owners.</p>
      </div>
    </div>
  </footer>
  <style>
    .modern-footer{background:linear-gradient(180deg,var(--bg-primary) 0%,var(--bg-secondary) 100%);border-top:1px solid var(--border-color);margin-top:80px;padding:60px 0 0;position:relative}
    .modern-footer::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,#00AFF0 50%,transparent 100%);opacity:.5}
    .footer-container{max-width:1400px;margin:0 auto;padding:0 16px}
    .footer-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:48px;padding-bottom:48px;border-bottom:1px solid var(--border-color)}
    .footer-brand{max-width:380px}
    .footer-logo{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px}
    .footer-logo-icon{width:48px;height:48px;background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#fff;flex-shrink:0;box-shadow:0 4px 12px rgba(0,175,240,0.3)}
    .footer-logo-icon svg{width:28px;height:28px}
    .footer-logo-text{display:flex;flex-direction:column;gap:2px}
    .footer-logo-main{font-size:18px;font-weight:700;color:var(--text-primary);line-height:1.2}
    .footer-logo-sub{font-size:13px;color:var(--text-secondary);font-weight:500}
    .footer-description{color:var(--text-secondary);font-size:14px;line-height:1.6;margin-bottom:24px}
    .footer-social{display:flex;gap:12px}
    .social-link{width:40px;height:40px;border-radius:10px;background:var(--bg-secondary);border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;color:var(--text-secondary);font-size:18px;transition:all .3s cubic-bezier(.4,0,.2,1);text-decoration:none}
    .social-link:hover{background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%);border-color:transparent;color:#fff;transform:translateY(-3px);box-shadow:0 6px 16px rgba(0,175,240,0.35)}
    .footer-column h3.footer-heading{font-size:14px;font-weight:700;color:var(--text-primary);text-transform:uppercase;letter-spacing:.8px;margin-bottom:20px;position:relative;padding-bottom:12px}
    .footer-column h3.footer-heading::after{content:'';position:absolute;bottom:0;left:0;width:32px;height:2px;background:linear-gradient(90deg,#00AFF0,#0099D6);border-radius:2px}
    .footer-links{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:12px}
    .footer-links a{color:var(--text-secondary);text-decoration:none;font-size:14px;display:inline-flex;align-items:center;transition:all .2s ease;position:relative;padding-left:0}
    .footer-links a::before{content:'';position:absolute;left:0;width:0;height:2px;background:linear-gradient(90deg,#00AFF0,#0099D6);bottom:-2px;transition:width .3s cubic-bezier(.4,0,.2,1)}
    .footer-links a:hover{color:#00AFF0;padding-left:8px}
    .footer-links a:hover::before{width:24px}
    .footer-bottom{padding:32px 0}
    .footer-bottom-content{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px;margin-bottom:16px}
    .footer-copyright{color:var(--text-secondary);font-size:14px;margin:0;font-weight:500}
    .footer-stats{display:flex;gap:16px;flex-wrap:wrap}
    .stat-badge{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:20px;color:var(--text-secondary);font-size:13px;font-weight:600;white-space:nowrap}
    .stat-badge i{color:#00AFF0;font-size:12px}
    .footer-disclaimer{color:var(--text-muted);font-size:12px;text-align:center;margin:0;line-height:1.5;max-width:900px;margin:0 auto}
    @media (max-width:992px){.footer-grid{grid-template-columns:2fr 1fr 1fr;gap:40px}.footer-brand{grid-column:1/-1;max-width:100%}}
    @media (max-width:768px){.modern-footer{margin-top:60px;padding:40px 0 0}.footer-grid{grid-template-columns:1fr;gap:36px;padding-bottom:36px}.footer-brand{text-align:center}.footer-logo{justify-content:center}.footer-description{text-align:center}.footer-social{justify-content:center}.footer-column h3.footer-heading{text-align:center}.footer-column h3.footer-heading::after{left:50%;transform:translateX(-50%)}.footer-links{text-align:center}.footer-links a::before{display:none}.footer-links a:hover{padding-left:0}.footer-bottom-content{flex-direction:column;text-align:center}.footer-stats{justify-content:center}}
    @media (max-width:480px){.footer-logo-icon{width:40px;height:40px}.footer-logo-icon svg{width:24px;height:24px}.footer-logo-main{font-size:16px}.footer-logo-sub{font-size:12px}.social-link{width:36px;height:36px;font-size:16px}.footer-stats{flex-direction:column;width:100%}.stat-badge{justify-content:center;width:100%}}
    [data-theme="dark"] .footer-logo-icon{box-shadow:0 4px 12px rgba(0,175,240,0.4)}
    [data-theme="dark"] .social-link{background:var(--bg-primary)}
    [data-theme="dark"] .stat-badge{background:var(--bg-primary)}
    [data-theme="dark"] .modern-footer::before{opacity:.7}
  </style>

  <!-- Sticky bottom nav -->
  <nav class="sticky-bottom-nav" role="navigation">
    <a href="/" class="nav-item" data-nav="search">
      <span class="icon"><i class="fa-solid fa-magnifying-glass"></i></span>
      <span class="label">Search</span>
    </a>
    <a href="/?near=me" class="nav-item" data-nav="near">
      <span class="icon"><i class="fa-solid fa-location-arrow"></i></span>
      <span class="label">Near Me</span>
    </a>
    <a href="/?sort=best" class="nav-item" data-nav="best">
      <span class="icon"><i class="fa-solid fa-trophy"></i></span>
      <span class="label">Best</span>
    </a>
    <a href="/?sort=hot" class="nav-item" data-nav="hot">
      <span class="icon"><i class="fa-solid fa-fire"></i></span>
      <span class="label">Hot!</span>
    </a>
    <a href="/wishlist/" class="nav-item active" data-nav="wishlist">
      <span class="icon"><i class="fa-solid fa-heart"></i></span>
      <span class="label">Wishlist</span>
    </a>
  </nav>

  <script type="module">
    // Import categories to populate dropdowns (match homepage version)
    import { popularCategories, categoryToSlug } from '/config/categories.js?v=20251108-1';

    // Header scroll behavior parity
    window.addEventListener('scroll', () => {
      const header = document.getElementById('mainHeader');
      if (!header) return;
      if (window.pageYOffset > 50) header.classList.add('scrolled');
      else header.classList.remove('scrolled');
    });

    // Populate desktop categories menu
    const catMenu = document.getElementById('categoriesMenu');
    if (catMenu) {
      catMenu.innerHTML = popularCategories.map(cat => {
        const slug = categoryToSlug(cat);
        const label = cat.split(' ').map(w => w.charAt(0).toUpperCase()+w.slice(1)).join(' ');
        return `<a role="menuitem" href="/categories/${slug}/">${label}</a>`;
      }).join('') + '<div class="divider"></div><a class="view-all" role="menuitem" href="/categories/">Browse all categories →</a>';
    }

    // Populate mobile drawer categories
    const drawerCats = document.getElementById('drawerCategories');
    if (drawerCats) {
      drawerCats.innerHTML = popularCategories.map(cat => {
        const slug = categoryToSlug(cat);
        const label = cat.split(' ').map(w => w.charAt(0).toUpperCase()+w.slice(1)).join(' ');
        return `<a href="/categories/${slug}/">${label}</a>`;
      }).join('');
    }

    // Categories drawer toggle
    const drawerCategoriesToggle = document.getElementById('drawerCategoriesToggle');
    const drawerCategoriesSection = document.getElementById('drawerCategoriesSection');
    if (drawerCategoriesToggle && drawerCategoriesSection) {
      drawerCategoriesToggle.addEventListener('click', () => {
        drawerCategoriesSection.classList.toggle('open');
      });
    }

    // Desktop categories dropdown
    const catToggle = document.getElementById('categoriesToggle');
    if (catToggle && catMenu) {
      catToggle.addEventListener('click', (e) => {
        e.stopPropagation();
        const isOpen = catMenu.classList.toggle('open');
        catToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
        catMenu.setAttribute('aria-hidden', isOpen ? 'false' : 'true');
      });
      document.addEventListener('click', (e) => {
        if (!catMenu.classList.contains('open')) return;
        if (!catMenu.contains(e.target) && e.target !== catToggle) {
          catMenu.classList.remove('open');
          catToggle.setAttribute('aria-expanded','false');
          catMenu.setAttribute('aria-hidden','true');
        }
      });
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          catMenu.classList.remove('open');
          catToggle.setAttribute('aria-expanded','false');
          catMenu.setAttribute('aria-hidden','true');
        }
      });
    }

    // Theme management (homepage parity)
    const themeToggle = document.getElementById('themeToggle');
    function getTheme(){ return localStorage.getItem('theme') || 'light'; }
    function applyTheme(t){
      document.documentElement.setAttribute('data-theme', t);
      const icon = themeToggle?.querySelector('i');
      if (icon) icon.className = t === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
      themeToggle?.setAttribute('aria-label', t === 'dark' ? 'Switch to light mode' : 'Switch to dark mode');
    }
    applyTheme(getTheme());
    themeToggle?.addEventListener('click', () => {
      const next = getTheme() === 'dark' ? 'light' : 'dark';
      localStorage.setItem('theme', next); applyTheme(next);
    });

    // Safe Search (full homepage logic)
    const safeSearchToggle = document.getElementById('safeSearchToggle');
    const safeSearchModal = document.getElementById('safeSearchModal');
    const enableSafeSearchBtn = document.getElementById('enableSafeSearch');
    const dismissSafeSearchBtn = document.getElementById('dismissSafeSearch');

    function getSafeSearchState(){ return localStorage.getItem('safeSearch') === 'true'; }
    function hasSeenSafeSearchModal(){ return localStorage.getItem('safeSearchModalShown') === 'true'; }
    function applySafeSearch(enabled){
      document.body.classList.toggle('safe-search-active', enabled);
      if (safeSearchToggle){
        safeSearchToggle.classList.toggle('active', enabled);
        const icon = safeSearchToggle.querySelector('i');
        if (icon) icon.className = enabled ? 'fas fa-eye-slash' : 'fas fa-eye';
        safeSearchToggle.setAttribute('aria-label', enabled ? 'Disable Safe Search (show images)' : 'Enable Safe Search (blur images)');
        safeSearchToggle.setAttribute('title', enabled ? 'Safe Search: ON (images blurred)' : 'Safe Search: OFF (images visible)');
      }
      localStorage.setItem('safeSearch', enabled ? 'true' : 'false');
    }
    function toggleSafeSearch(){ applySafeSearch(!getSafeSearchState()); }
    function showSafeSearchModal(){ if(safeSearchModal){ safeSearchModal.classList.add('show'); document.body.style.overflow='hidden'; setTimeout(()=>{ const firstBtn = safeSearchModal.querySelector('button'); firstBtn?.focus(); },100); } }
    function hideSafeSearchModal(){ if(safeSearchModal){ safeSearchModal.classList.remove('show'); document.body.style.overflow=''; localStorage.setItem('safeSearchModalShown','true'); } }
    function initSafeSearch(){
      const saved = getSafeSearchState(); applySafeSearch(saved);
      if(!hasSeenSafeSearchModal()){ setTimeout(showSafeSearchModal, 10000); }
      const urlParams = new URLSearchParams(window.location.search); if(urlParams.has('safe')){ const forced = urlParams.get('safe') === '1'; applySafeSearch(forced); }
    }
    safeSearchToggle?.addEventListener('click', toggleSafeSearch);
    enableSafeSearchBtn?.addEventListener('click', () => { applySafeSearch(true); hideSafeSearchModal(); });
    dismissSafeSearchBtn?.addEventListener('click', () => { applySafeSearch(false); hideSafeSearchModal(); });
    safeSearchModal?.addEventListener('click', e => { if(e.target === safeSearchModal){ applySafeSearch(false); hideSafeSearchModal(); } });
    document.addEventListener('keydown', e => { if(e.altKey && e.key.toLowerCase()==='s'){ e.preventDefault(); toggleSafeSearch(); } if(e.key==='Escape' && safeSearchModal?.classList.contains('show')){ applySafeSearch(false); hideSafeSearchModal(); } });
    initSafeSearch();

    // Mobile drawer open/close
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const drawer = document.getElementById('mobileDrawer');
    const overlay = document.getElementById('drawerOverlay');
    const drawerClose = document.getElementById('drawerClose');
    function openDrawer(){ drawer?.classList.add('open'); overlay?.classList.add('open'); drawer?.setAttribute('aria-hidden','false'); overlay?.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
    function closeDrawer(){ drawer?.classList.remove('open'); overlay?.classList.remove('open'); drawer?.setAttribute('aria-hidden','true'); overlay?.setAttribute('aria-hidden','true'); document.body.style.overflow=''; }
    mobileMenuToggle?.addEventListener('click', e => { e.preventDefault(); openDrawer(); });
    overlay?.addEventListener('click', closeDrawer);
    drawerClose?.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', e => { if (e.key === 'Escape') closeDrawer(); });

    // Mobile search modal
    const mobileSearchTrigger = document.getElementById('mobileSearchTrigger');
    const mobileSearchModal = document.getElementById('mobileSearchModal');
    const mobileSearchBack = document.getElementById('mobileSearchBack');
    const mobileSearchInput = document.getElementById('mobileSearchInput');
    const mobileSearchSuggestions = document.getElementById('mobileSearchSuggestions');
    const popularSearches = ['milf','asian','big tits','trans','mature','latina','big ass','bbw'];
    function populateMobileSuggestions(){ if(mobileSearchSuggestions){ mobileSearchSuggestions.innerHTML = popularSearches.map(t => `<a href="/?q=${encodeURIComponent(t)}" class="mobile-search-suggestion"><i class=\"fas fa-fire\"></i><span>${t}</span></a>`).join(''); } }
    populateMobileSuggestions();
    function openMobileSearch(){ mobileSearchModal?.classList.add('active'); document.body.style.overflow='hidden'; setTimeout(()=> mobileSearchInput?.focus(),100); }
    function closeMobileSearch(){ mobileSearchModal?.classList.remove('active'); document.body.style.overflow=''; if(mobileSearchInput) mobileSearchInput.value=''; }
    mobileSearchTrigger?.addEventListener('click', openMobileSearch);
    mobileSearchBack?.addEventListener('click', closeMobileSearch);
    mobileSearchInput?.addEventListener('keypress', e => { if(e.key==='Enter'){ const q = mobileSearchInput.value.trim(); if(q) window.location.href = `/?q=${encodeURIComponent(q)}`; } });

    // Header search redirect (desktop)
    const headerSearch = document.getElementById('headerSearch');
    headerSearch?.addEventListener('keypress', e => { if(e.key==='Enter'){ const q = headerSearch.value.trim(); if(q) window.location.href = `/?q=${encodeURIComponent(q)}`; }});

    // ================= Wishlist Rendering (Batch + Responsive Images) =================
    function getFavorites(){ try { const raw = localStorage.getItem('favorites') || '[]'; const arr = JSON.parse(raw); return Array.isArray(arr)?arr.filter(Boolean):[]; } catch { return []; } }
    const resultsContainer = document.getElementById('wishlistResults');
    const emptyState = document.getElementById('emptyState');

    // Image proxy + responsive helpers
    function proxyImg(originalUrl, w, h){
      if(!originalUrl) return '/static/no-image.png';
      return `https://images.weserv.nl/?url=${encodeURIComponent(originalUrl)}&w=${w}&h=${h}&fit=cover&output=webp&q=85`;
    }
    function buildResponsiveSources(originalUrl){
      const widths=[144,240,320,480,720];
      const srcset=widths.map(w=>`${proxyImg(originalUrl,w,Math.round(w*4/3))} ${w}w`).join(', ');
      const src=proxyImg(originalUrl,320,Math.round(320*4/3));
      const sizes='(max-width: 480px) 144px, (max-width: 768px) 240px, 320px';
      return {src,srcset,sizes};
    }

    async function renderWishlist(){
      const favorites = getFavorites(); // Get fresh favorites each time
      resultsContainer.innerHTML = ''; // Clear existing cards
      emptyState.style.display = 'none'; // Reset empty state
      
      // Show/hide Clear All button based on wishlist count
      const clearBtn = document.getElementById('clearAllBtn');
      if(clearBtn) clearBtn.classList.toggle('show', favorites.length > 0);
      
      if(!favorites.length){ emptyState.style.display='block'; return; }
      try {
        const resp = await fetch(`/api/wishlist?users=${favorites.map(encodeURIComponent).join(',')}`);
        let data=[]; try { data = await resp.json(); } catch {}
        if(!Array.isArray(data) || !data.length){ emptyState.style.display='block'; return; }
        data.forEach((creator,i)=>{
          if(!creator || !creator.username) return;
          const img = creator.avatar || creator.avatar_c144 || creator.avatar_c50 || '/static/no-image.png';
          const {src,srcset,sizes} = buildResponsiveSources(img);
          const priceNum = parseFloat(creator.subscribePrice || creator.subscribeprice);
          const priceLabel = !isNaN(priceNum) && priceNum>0 ? `$${priceNum.toFixed(2)}` : 'FREE';
          const card = document.createElement('div'); card.className='col-sm-6 col-md-4 col-lg-3 mb-4';
          const verifiedIcon = (creator.isVerified || creator.isverified) ? '✅ ' : '';
          const safeUser = String(creator.username).replace(/'/g, "\\'");
          const isFirst = i===0;
          if(isFirst){ try { const link=document.createElement('link'); link.rel='preload'; link.as='image'; link.href=src; link.setAttribute('imagesrcset',srcset); link.setAttribute('imagesizes',sizes); document.head.appendChild(link); } catch{} }
          card.innerHTML = `<div class=\"card h-100\" data-username=\"${safeUser}\">\n<button class=\"favorite-btn active\" data-username=\"${safeUser}\" onclick=\"event.preventDefault(); toggleFavoriteWishlist('${safeUser}', this);\"><span>♥</span></button>\n<img src=\"${src}\" srcset=\"${srcset}\" sizes=\"${sizes}\" alt=\"${creator.name || creator.username}\" width=\"270\" height=\"360\" style=\"aspect-ratio:3/4;\" ${isFirst?'loading=\"eager\" fetchpriority=\"high\"':'loading=\"lazy\" fetchpriority=\"low\"'} decoding=\"async\" referrerpolicy=\"no-referrer\" onerror=\"if(this.src!='/static/no-image.png'){this.removeAttribute('srcset');this.removeAttribute('sizes');this.src='${img}';}\">\n<div class=\"card-body\">\n<h5>${verifiedIcon}${creator.name || creator.username}</h5>\n<p class=\"username\">@${creator.username}</p>${priceLabel==='FREE'?`<p class=\"price-free\">${priceLabel}</p>`:`<p class=\"price-tag\">${priceLabel}</p>`}\n<a href=\"https://onlyfans.com/${creator.username}\" class=\"view-profile-btn\" target=\"_blank\" rel=\"noopener noreferrer\">View Profile</a>\n</div></div>`;
          resultsContainer.appendChild(card);
        });
        if(!resultsContainer.children.length) emptyState.style.display='block';
      } catch(err){ console.error('Wishlist render error', err); emptyState.style.display='block'; }
    }
    renderWishlist();

    window.toggleFavoriteWishlist = function(username, btnEl){
      if(!username) return; const set = new Set(getFavorites()); let active;
      if(set.has(username)){ set.delete(username); active=false; } else { set.add(username); active=true; }
      try { localStorage.setItem('favorites', JSON.stringify(Array.from(set))); } catch {}
      if(typeof window.fpUpdateWishlistBadge === 'function') window.fpUpdateWishlistBadge();
      if(btnEl){ btnEl.classList.toggle('active', active); const span = btnEl.querySelector('span'); if(span) span.textContent = active ? '♥' : '♡'; }
      if(!active){ 
        const wrapper = btnEl.closest('.card')?.parentElement; 
        if(wrapper && !wrapper.dataset.removing){ 
          wrapper.dataset.removing = 'true';
          wrapper.style.transition='opacity .3s ease, transform .3s ease'; 
          wrapper.style.opacity='0'; 
          wrapper.style.transform='scale(.95)'; 
          setTimeout(()=>{ renderWishlist(); },300); 
        } 
      }
    }

    // Clear All functionality
    const clearAllBtn = document.getElementById('clearAllBtn');
    const clearAllModal = document.getElementById('clearAllModal');
    const cancelClearAll = document.getElementById('cancelClearAll');
    const confirmClearAll = document.getElementById('confirmClearAll');
    const modalCreatorCount = document.getElementById('modalCreatorCount');

    function openClearModal(){
      const count = getFavorites().length;
      if(modalCreatorCount) modalCreatorCount.textContent = count;
      if(clearAllModal) clearAllModal.classList.add('show');
      document.body.style.overflow = 'hidden';
    }

    function closeClearModal(){
      if(clearAllModal) clearAllModal.classList.remove('show');
      document.body.style.overflow = '';
    }

    function clearAllWishlist(){
      try {
        localStorage.setItem('favorites', '[]');
        closeClearModal();
        renderWishlist();
        // Update badge if wishlist-badge.js loaded
        if(window.fpUpdateWishlistBadge) window.fpUpdateWishlistBadge();
      } catch(err) {
        console.error('Failed to clear wishlist:', err);
      }
    }

    clearAllBtn?.addEventListener('click', openClearModal);
    cancelClearAll?.addEventListener('click', closeClearModal);
    confirmClearAll?.addEventListener('click', clearAllWishlist);
    clearAllModal?.addEventListener('click', e => {
      if(e.target === clearAllModal) closeClearModal();
    });
    document.addEventListener('keydown', e => {
      if(e.key === 'Escape' && clearAllModal?.classList.contains('show')){
        closeClearModal();
      }
    });
  </script>
  <!-- Sticky Bottom Navigation -->
  <nav class="sticky-bottom-nav" role="navigation" aria-label="Bottom navigation">
    <a href="/#headerSearch" class="nav-item" data-nav="search">
      <span class="icon"><i class="fa-solid fa-magnifying-glass"></i></span>
      <span class="label">Search</span>
    </a>
    <a href="/?near=me" class="nav-item" data-nav="near">
      <span class="icon"><i class="fa-solid fa-location-arrow"></i></span>
      <span class="label">Near Me</span>
    </a>
    <a href="/?sort=best" class="nav-item" data-nav="best">
      <span class="icon"><i class="fa-solid fa-trophy"></i></span>
      <span class="label">Best</span>
    </a>
    <a href="/?sort=hot" class="nav-item" data-nav="hot">
      <span class="icon"><i class="fa-solid fa-fire"></i></span>
      <span class="label">Hot!</span>
    </a>
    <a href="/wishlist/" class="nav-item active" data-nav="wishlist">
      <span class="icon position-relative">
        <i class="fa-solid fa-heart"></i>
        <span class="wishlist-count" style="display:none;position:absolute;top:-6px;right:-6px;background:#ff3b30;color:#fff;font-size:10px;font-weight:700;border-radius:10px;min-width:18px;height:18px;align-items:center;justify-content:center;padding:0 5px;border:2px solid var(--bg-secondary);box-shadow:0 2px 8px rgba(255,59,48,0.4)">0</span>
      </span>
      <span class="label">Wishlist</span>
    </a>
  </nav>
  <style>
    .sticky-bottom-nav{position:fixed;left:0;right:0;bottom:calc(0px + env(safe-area-inset-bottom));z-index:9999;display:flex;align-items:center;justify-content:space-between;padding:8px 16px;background:var(--bg-secondary);border-top:1px solid var(--border-color);box-shadow:0 -4px 12px rgba(0,0,0,0.06)}
    .sticky-bottom-nav .nav-item{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;color:var(--text-primary);text-decoration:none;transition:all 0.2s ease}
    .sticky-bottom-nav .nav-item.active .icon{background:linear-gradient(135deg,#00AFF0 0%,#0099D6 100%);box-shadow:0 4px 12px rgba(0,175,240,0.35)}
    .sticky-bottom-nav .icon{width:32px;height:32px;border-radius:10px;background:var(--chip-bg);display:flex;align-items:center;justify-content:center;color:var(--text-primary);position:relative}
    .sticky-bottom-nav .icon i{font-size:15px}
    .sticky-bottom-nav .label{font-size:11px;font-weight:700;color:var(--text-primary)}
    .position-relative{position:relative}
  </style>
  <script src="/utils/wishlist-badge.js?v=20251116-1"></script>
</body>
</html>
